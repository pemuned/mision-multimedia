var global_player_gender,SelectPlayer=pc.createScript("selectPlayer");SelectPlayer.attributes.add("btn_start",{type:"entity"}),SelectPlayer.attributes.add("j1",{type:"entity"}),SelectPlayer.attributes.add("j2",{type:"entity"}),SelectPlayer.attributes.add("btn_j1",{type:"entity"}),SelectPlayer.attributes.add("btn_j2",{type:"entity"}),SelectPlayer.attributes.add("logo",{type:"entity"}),SelectPlayer.attributes.add("select_text",{type:"entity"}),SelectPlayer.attributes.add("player_body",{type:"entity"}),SelectPlayer.attributes.add("player_models",{type:"asset",array:!0,assetType:"model"}),SelectPlayer.attributes.add("select_name_screen",{type:"entity"}),SelectPlayer.attributes.add("root",{type:"entity"}),SelectPlayer.prototype.initialize=function(){this.btn_j1.element.on("mousedown",this.onBtnJ1Press,this),this.btn_j2.element.on("mousedown",this.onBtnJ2Press,this),this.btn_start.element.on("mousedown",this.onBtnStartPress,this),this.btn_j1.element.on("touchstart",this.onBtnJ1Press,this),this.btn_j2.element.on("touchstart",this.onBtnJ2Press,this),this.btn_start.element.on("touchstart",this.onBtnStartPress,this),start_game=!1,j1_speed=-1,j2_speed=1,logo_speed=2},SelectPlayer.prototype.update=function(t){start_game&&(this.logo.getLocalPosition().y<=245&&this.logo.translate(0,logo_speed*t,0),this.j1.getLocalPosition().x>=-260&&this.j1.translate(j1_speed*t,0,0),this.j1.getLocalPosition().x<=-260&&(this.btn_j1.enabled=!0),this.j2.getLocalPosition().x<=260&&this.j2.translate(j2_speed*t,0,0),this.j2.getLocalPosition().x>=260&&(this.btn_j2.enabled=!0),(this.btn_j1.enabled||this.btn_j2.enabled)&&(this.select_text.enabled=!0))},SelectPlayer.prototype.select=function(t){this.player_body.model.asset=this.player_models[t],this.root.script.gameHistory.player_gender=t},SelectPlayer.prototype.onBtnJ1Press=function(t){global_game_sound.play("ok"),this.select(0),global_player_gender="F",this.entity.enabled=!1,this.select_name_screen.enabled=!0,document.fullscreenElement},SelectPlayer.prototype.onBtnJ2Press=function(t){global_game_sound.play("ok"),this.select(1),global_player_gender="M",this.entity.enabled=!1,this.select_name_screen.enabled=!0,document.fullscreenElement},SelectPlayer.prototype.onBtnStartPress=function(t){global_game_sound.play("ok"),start_game=!0,this.btn_start.enabled=!1};var DialogsScreen=pc.createScript("dialogsScreen");DialogsScreen.attributes.add("phraseData",{type:"asset",array:!1,assetType:"json"}),DialogsScreen.attributes.add("level",{type:"number",default:0});var phraseData=null;DialogsScreen.prototype.initialize=function(){phraseData=this.phraseData.resource,id_text=0,"F"==global_player_gender&&(id_text=96),"M"==global_player_gender&&(id_text=95),this.entity.element.text=this.sentence(this.level).text.replace("@the_boss",this.sentence(id_text).text).replace("@welcome",this.sentence(id_text).title).replace("@player_name",global_game_player_name)},DialogsScreen.prototype.update=function(e){},DialogsScreen.prototype.sentence=function(e){return this.parsePhraseData(phraseData,e)[0]},DialogsScreen.prototype.parsePhraseData=function(e,t){for(var a=[],r=e.phrases,s=0;s<r.length;s++){var n=r[s];n.level==t&&a.push(n)}return a};var global_player_movement,global_game_step,global_game_activity,global_game_status_dialog,global_game_player_name,global_player_enter,global_game_startTime,global_game_sound,GameHistory=pc.createScript("gameHistory");GameHistory.attributes.add("player",{type:"entity"}),GameHistory.attributes.add("player_body",{type:"entity"}),GameHistory.attributes.add("message_box",{type:"entity"}),GameHistory.attributes.add("btn_ok",{type:"entity"}),GameHistory.attributes.add("score",{type:"entity"}),GameHistory.attributes.add("blocks_dialogs",{type:"entity",array:!0}),GameHistory.attributes.add("speak_signs",{type:"entity",array:!0}),GameHistory.attributes.add("body_npcs",{type:"entity",array:!0}),GameHistory.attributes.add("btn_mail",{type:"entity"}),GameHistory.attributes.add("count_act",{type:"entity"}),GameHistory.attributes.add("photo",{type:"entity"}),GameHistory.attributes.add("items",{type:"entity",array:!0}),GameHistory.attributes.add("list_photos",{type:"asset",array:!0,assetType:"texture"}),GameHistory.attributes.add("player_gender",{type:"number",default:0}),GameHistory.attributes.add("super_calculator",{type:"entity"}),GameHistory.prototype.initialize=function(){this.btn_ok.element.on("mousedown",this.onBtnOkPress,this),this.btn_ok.element.on("touchstart",this.onBtnOkPress,this),global_player_movement=!1,global_game_step=1,global_game_activity=0,global_game_status_dialog=!1,global_player_enter=!1,global_game_sound=this.entity.sound,this.count_act.element.text=global_game_activity,this.score.enabled=!1,cartas=this.items[0],comprobante=this.items[1],reporte=this.items[2],declaracion=this.items[3],telefono=this.items[4],control_reportes=this.items[5],carpeta=this.items[6],calculadora=this.items[7],caja=this.items[8],dlg_jefatura_auxiliar1=this.blocks_dialogs[3],dlg_jefatura_auxiliar2=this.blocks_dialogs[8],dlg_jefatura_auxiliar3=this.blocks_dialogs[12],dlg_jefatura_auxiliar4=this.blocks_dialogs[19],dlg_jefatura_abogado=this.blocks_dialogs[4],dlg_recepcionista=this.blocks_dialogs[0],dlg_secretaria=this.blocks_dialogs[1],dlg_auxiliar1=this.blocks_dialogs[2],dlg_auxiliar2=this.blocks_dialogs[7],dlg_auxiliar3=this.blocks_dialogs[11],dlg_auxiliar4=this.blocks_dialogs[18],dlg_abogado=this.blocks_dialogs[5],dlg_mail=this.blocks_dialogs[6],dlg_jefatura_tesorera=this.blocks_dialogs[9],dlg_tesorera=this.blocks_dialogs[10],dlg_telefono=this.blocks_dialogs[13],dlg_jefatura_telefono=this.blocks_dialogs[14],dlg_control=this.blocks_dialogs[15],dlg_jefatura_reporte=this.blocks_dialogs[16],dlg_pc=this.blocks_dialogs[17],dlg_jefatura_secretaria=this.blocks_dialogs[20],dlg_jefatura_pizarra=this.blocks_dialogs[21],dlg_calculadora=this.blocks_dialogs[22],dlg_calculadora_dp=this.blocks_dialogs[23],dlg_calculadora_vl=this.blocks_dialogs[24],dlg_jefatura_pizarra2=this.blocks_dialogs[25],dlg_jefatura_final=this.blocks_dialogs[26],dlg_endgame=this.blocks_dialogs[27],dlg_proveeduria=this.blocks_dialogs[28],npc_recepcionista=this.body_npcs[0],npc_secretaria=this.body_npcs[1],npc_auxiliar1=this.body_npcs[2],npc_auxiliar2=this.body_npcs[4],npc_abogado=this.body_npcs[3],npc_tesorera=this.body_npcs[5],npc_auxiliar3=this.body_npcs[6],npc_player_clone=this.body_npcs[7],npc_auxiliar4=this.body_npcs[8],npc_proveeduria=this.body_npcs[9],photo_recepcionista=this.list_photos[1].resource,photo_secretaria=this.list_photos[2].resource,photo_auxiliar1=this.list_photos[3].resource,photo_auxiliar2=this.list_photos[5].resource,photo_abogado=this.list_photos[4].resource,photo_tesorera=this.list_photos[6].resource,photo_auxiliar3=this.list_photos[8].resource,photo_telefono=this.list_photos[9].resource,photo_reporte=this.list_photos[10].resource,photo_auxiliar4=this.list_photos[11].resource,photo_calculadora=this.list_photos[12].resource,photo_proveeduria=this.list_photos[13].resource,ss_recepcionista=this.speak_signs[0],ss_secretaria=this.speak_signs[1],ss_auxiliar1=this.speak_signs[2],ss_auxiliar2=this.speak_signs[5],ss_abogado=this.speak_signs[3],ss_mail=this.speak_signs[4],ss_tesorera=this.speak_signs[6],ss_auxiliar3=this.speak_signs[7],ss_telefono=this.speak_signs[8],ss_pc=this.speak_signs[9],ss_auxiliar4=this.speak_signs[10],ss_pizarra=this.speak_signs[11],ss_calculadora=this.speak_signs[12],this.photo.element.texture=photo_recepcionista},GameHistory.prototype.update=function(a){36==global_game_step&&(dlg_calculadora_dp.enabled=!0),37==global_game_step&&(dlg_calculadora_vl.enabled=!0),global_game_status_dialog=this.message_box.enabled},GameHistory.prototype.onBtnOkPress=function(a){if(global_game_sound.play("ok_d"),this.btn_ok){var e=this.btn_ok;e.enabled=!1;var t=500;19==global_game_step&&(t=1500),setTimeout((function(){e.enabled=!0}),t)}this.controlSteps(),35!=global_game_step&&36!=global_game_step&&global_game_step++},GameHistory.prototype.activeMail=function(a){a&&global_game_sound.play("mail"),this.btn_mail.enabled=a,dlg_mail.enabled=a,ss_mail.enabled=a},GameHistory.prototype.controlSteps=function(){switch(global_player_movement=!0,this.message_box.enabled=!1,0===this.player_gender&&(photo_jugador=this.list_photos[0].resource),1===this.player_gender&&(photo_jugador=this.list_photos[7].resource),global_game_step){case 1:dlg_recepcionista.enabled=!1,ss_recepcionista.enabled=!1,dlg_secretaria.enabled=!0,ss_secretaria.enabled=!0,this.photo.element.texture=photo_secretaria,global_game_sound.play("open");break;case 2:dlg_secretaria.enabled=!1,ss_secretaria.enabled=!1,this.score.enabled=!0,this.activeMail(!0),dlg_auxiliar1.enabled=!0,ss_auxiliar1.enabled=!0,this.photo.element.texture=photo_auxiliar1;break;case 3:dlg_auxiliar1.enabled=!1,ss_auxiliar1.enabled=!1,this.photo.element.texture=photo_jugador,dlg_jefatura_auxiliar1.enabled=!0;break;case 4:dlg_jefatura_auxiliar1.enabled=!1,dlg_jefatura_abogado.enabled=!0,ss_abogado.enabled=!0;break;case 5:dlg_jefatura_abogado.enabled=!1,dlg_abogado.enabled=!0,this.photo.element.texture=photo_abogado;break;case 6:dlg_abogado.enabled=!1,ss_abogado.enabled=!1,cartas.enabled=!0,this.photo.element.texture=photo_jugador,dlg_jefatura_auxiliar1.script.dialogs.current_dialog=1,dlg_jefatura_auxiliar1.enabled=!0,ss_auxiliar1.enabled=!0;break;case 7:dlg_jefatura_auxiliar1.enabled=!1,dlg_auxiliar1.script.dialogs.current_dialog=1,dlg_auxiliar1.enabled=!0,this.photo.element.texture=photo_auxiliar1;break;case 8:cartas.enabled=!1,dlg_auxiliar1.enabled=!1,ss_auxiliar1.enabled=!1,dlg_jefatura_auxiliar1.script.dialogs.current_dialog=2,this.photo.element.texture=photo_jugador,dlg_jefatura_auxiliar1.enabled=!0,global_game_activity=1;break;case 9:this.count_act.element.text=global_game_activity,dlg_jefatura_auxiliar1.enabled=!1,this.activeMail(!0),this.photo.element.texture=photo_auxiliar2,dlg_auxiliar2.enabled=!0,ss_auxiliar2.enabled=!0;break;case 10:dlg_auxiliar2.enabled=!1,this.photo.element.texture=photo_jugador,dlg_jefatura_auxiliar2.enabled=!0;break;case 11:dlg_jefatura_auxiliar2.enabled=!1,ss_auxiliar2.enabled=!1,dlg_jefatura_tesorera.enabled=!0,ss_tesorera.enabled=!0,global_game_sound.play("open");break;case 12:dlg_jefatura_tesorera.enabled=!1,this.photo.element.texture=photo_tesorera,dlg_tesorera.enabled=!0;break;case 13:dlg_tesorera.enabled=!1,ss_tesorera.enabled=!1,comprobante.enabled=!0,this.photo.element.texture=photo_jugador,ss_auxiliar2.enabled=!0,dlg_jefatura_auxiliar2.script.dialogs.current_dialog=1,dlg_jefatura_auxiliar2.enabled=!0;break;case 14:dlg_jefatura_auxiliar2.enabled=!1,dlg_auxiliar2.script.dialogs.current_dialog=1,dlg_auxiliar2.enabled=!0,this.photo.element.texture=photo_auxiliar2;break;case 15:dlg_auxiliar2.enabled=!1,ss_auxiliar2.enabled=!1,comprobante.enabled=!1,dlg_jefatura_auxiliar2.script.dialogs.current_dialog=2,dlg_jefatura_auxiliar2.enabled=!0,this.photo.element.texture=photo_jugador,global_game_activity=2;break;case 16:dlg_jefatura_auxiliar2.enabled=!1,ss_auxiliar2.enabled=!1,this.count_act.element.text=global_game_activity,this.activeMail(!0),dlg_auxiliar3.enabled=!0,ss_auxiliar3.enabled=!0,this.photo.element.texture=photo_auxiliar3;break;case 17:dlg_auxiliar3.enabled=!1,ss_auxiliar3.enabled=!1,dlg_jefatura_auxiliar3.setLocalPosition(dlg_jefatura_auxiliar3.getLocalPosition().x,dlg_jefatura_auxiliar3.getLocalPosition().y,dlg_jefatura_auxiliar3.getLocalPosition().z-.1),dlg_jefatura_auxiliar3.enabled=!0,this.photo.element.texture=photo_jugador;break;case 18:dlg_jefatura_auxiliar3.enabled=!1,ss_auxiliar3.enabled=!1,dlg_jefatura_telefono.enabled=!0,ss_telefono.enabled=!0,telefono.enabled=!0;break;case 19:global_game_sound.play("phone"),dlg_jefatura_telefono.enabled=!1,ss_telefono.enabled=!1,telefono.enabled=!1,dlg_telefono.enabled=!0,this.photo.element.texture=photo_telefono;break;case 20:dlg_telefono.enabled=!1,npc_proveeduria.enabled=!0;var a=this.player.getLocalEulerAngles();this.player.setLocalEulerAngles(a.x,90,a.z),this.photo.element.texture=photo_proveeduria,setTimeout((function(){dlg_proveeduria.enabled=!0}),3e3);break;case 21:dlg_proveeduria.enabled=!1,caja.enabled=!0,dlg_pc.enabled=!0,ss_pc.enabled=!0,this.photo.element.texture=photo_jugador;break;case 22:dlg_pc.enabled=!1,ss_pc.enabled=!1,caja.enabled=!1,dlg_control.enabled=!0,this.photo.element.texture=photo_reporte,npc_player_clone.enabled=!0,this.player_body.enabled=!1,control_reportes.enabled=!0,global_game_sound.play("typing");break;case 23:global_game_sound.stop("typing"),dlg_control.enabled=!1,control_reportes.enabled=!1,this.player_body.enabled=!0,npc_player_clone.enabled=!1,dlg_jefatura_reporte.enabled=!0,caja.enabled=!0,reporte.enabled=!0,this.photo.element.texture=photo_jugador;break;case 24:dlg_jefatura_reporte.enabled=!1,dlg_jefatura_auxiliar3.enabled=!0,dlg_jefatura_auxiliar3.script.dialogs.current_dialog=1,ss_auxiliar3.enabled=!0;break;case 25:dlg_jefatura_auxiliar3.enabled=!1,caja.enabled=!1,reporte.enabled=!1,declaracion.enabled=!0,dlg_auxiliar3.setLocalPosition(dlg_auxiliar3.getLocalPosition().x,dlg_auxiliar3.getLocalPosition().y,dlg_auxiliar3.getLocalPosition().z-.1),dlg_auxiliar3.enabled=!0,dlg_auxiliar3.script.dialogs.current_dialog=1,this.photo.element.texture=photo_auxiliar3;break;case 26:dlg_auxiliar3.enabled=!1,ss_auxiliar3.enabled=!1,dlg_jefatura_auxiliar3.script.dialogs.current_dialog=2,dlg_jefatura_auxiliar3.enabled=!0,this.photo.element.texture=photo_jugador,global_game_activity=3;break;case 27:dlg_jefatura_auxiliar3.enabled=!1,declaracion.enabled=!1,this.count_act.element.text=global_game_activity,this.activeMail(!0),dlg_auxiliar4.enabled=!0,ss_auxiliar4.enabled=!0,this.photo.element.texture=photo_auxiliar4;break;case 28:dlg_auxiliar4.enabled=!1,ss_auxiliar4.enabled=!1,dlg_jefatura_auxiliar4.enabled=!0,this.photo.element.texture=photo_jugador;break;case 29:dlg_jefatura_auxiliar4.enabled=!1,dlg_jefatura_secretaria.enabled=!0,ss_secretaria.enabled=!0,this.photo.element.texture=photo_jugador;break;case 30:dlg_jefatura_secretaria.enabled=!1,dlg_secretaria.enabled=!0,dlg_secretaria.script.dialogs.current_dialog=1,this.photo.element.texture=photo_secretaria;break;case 31:dlg_secretaria.enabled=!1,ss_secretaria.enabled=!1,carpeta.enabled=!0,dlg_jefatura_secretaria.enabled=!0,dlg_jefatura_secretaria.script.dialogs.current_dialog=1,this.photo.element.texture=photo_jugador;break;case 32:dlg_jefatura_secretaria.enabled=!1,dlg_jefatura_pizarra.enabled=!0,ss_pizarra.enabled=!0;break;case 33:dlg_jefatura_pizarra.enabled=!1,ss_pizarra.enabled=!1,dlg_jefatura_pizarra2.enabled=!0;break;case 34:dlg_jefatura_pizarra2.enabled=!1,carpeta.enabled=!1,this.super_calculator.enabled=!0,global_game_sound.play("copen"),dlg_calculadora.enabled=!0,ss_calculadora.enabled=!0,this.photo.element.texture=photo_calculadora;break;case 35:dlg_calculadora.enabled=!1,global_player_movement=!1,ss_calculadora.enabled=!1,this.photo.element.texture=photo_jugador;break;case 36:dlg_calculadora_dp.enabled=!1,global_player_movement=!1;break;case 37:dlg_calculadora_vl.enabled=!1,dlg_calculadora_dp.enabled=!1,calculadora.enabled=!0,dlg_jefatura_auxiliar4.enabled=!0,dlg_jefatura_auxiliar4.script.dialogs.current_dialog=1,ss_auxiliar4.enabled=!0;break;case 38:dlg_jefatura_auxiliar4.enabled=!1,calculadora.enabled=!1,dlg_auxiliar4.enabled=!0,dlg_auxiliar4.script.dialogs.current_dialog=1,this.photo.element.texture=photo_auxiliar4,global_game_activity=4;break;case 39:dlg_auxiliar4.enabled=!1,ss_auxiliar4.enabled=!1,dlg_jefatura_final.enabled=!0,this.photo.element.texture=photo_jugador;break;case 40:dlg_jefatura_final.enabled=!1,dlg_endgame.enabled=!0,this.count_act.element.text=global_game_activity,this.activeMail(!0)}};var Dialogs=pc.createScript("dialogs");Dialogs.attributes.add("message_box",{type:"entity"}),Dialogs.attributes.add("title",{type:"entity"}),Dialogs.attributes.add("phrase",{type:"entity"}),Dialogs.attributes.add("player",{type:"entity"}),Dialogs.attributes.add("body_npc",{type:"entity"}),Dialogs.attributes.add("phraseData",{type:"asset",array:!1,assetType:"json"}),Dialogs.attributes.add("dialogs",{type:"number",array:!0}),Dialogs.attributes.add("current_dialog",{type:"number",default:0}),Dialogs.attributes.add("root",{type:"entity"});var phraseData=null;Dialogs.prototype.initialize=function(){this.message_box.enabled=!1,this.entity.collision.on("triggerenter",this.onTriggerEnter,this),phraseData=this.phraseData.resource,text_element=this.phrase.element,c=0,d=0,timer=null,text_dialog="","F"==global_player_gender&&(id_text=98),"M"==global_player_gender&&(id_text=97)},Dialogs.prototype.update=function(t){this.animateText()},Dialogs.prototype.sentence=function(t){return this.parsePhraseData(phraseData,t)[0]},Dialogs.prototype.parsePhraseData=function(t,e){for(var a=[],i=t.phrases,s=0;s<i.length;s++){var r=i[s];r.level==e&&a.push(r)}return a},Dialogs.prototype.onTriggerEnter=function(t){this.player.rigidbody&&(global_game_sound.play("chat"),text_element.text="",text_dialog="",d=0,c=0,text_dialog=this.sentence(this.dialogs[this.current_dialog]).text.replace("@boss",this.sentence(id_text).text),this.message_box.enabled=!0,this.title.element.text=this.sentence(this.dialogs[this.current_dialog]).title.replace("@PLAYER_TITLE",this.sentence(id_text).title).replace("@PLAYER_NAME",global_game_player_name),this.root.script.gameHistory.activeMail(!1),global_player_movement=!1)},Dialogs.prototype.animateText=function(){try{d<parseInt(text_dialog.length/10)+1&&(text_element.text+=text_dialog.substring(c,c+10),c+=10,d++)}catch(t){}};var Intro=pc.createScript("intro");Intro.attributes.add("btn_play",{type:"entity"}),Intro.attributes.add("touch_controls",{type:"entity"}),Intro.attributes.add("options",{type:"entity"}),Intro.prototype.initialize=function(){this.btn_play.element.on("mousedown",this.onBtnPlayPress,this),this.btn_play.element.on("touchstart",this.onBtnPlayPress,this),document.getElementsByTagName("body")[0].style.cursor="url(https://deiverhz.github.io/oficontactp/cursor.png), auto";var t=document.createElement("div");t.innerHTML="<div id='lic_link' style='position: absolute; width: 80px; left: 2px; bottom: 2px; display: block;'><a target='_blank' rel='license' href='https://creativecommons.org/licenses/by-nc-nd/4.0' title='CC BY-NC-ND 4.0'><img style='height:22px!important;margin-left:3px;vertical-align:text-bottom;' src='https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1' /><img style='height:22px!important;margin-left:3px;vertical-align:text-bottom;' src='https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1' /><img style='height:22px!important;margin-left:3px;vertical-align:text-bottom;' src='https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1' /><img style='height:22px!important;margin-left:3px;vertical-align:text-bottom;' src='https://mirrors.creativecommons.org/presskit/icons/nd.svg?ref=chooser-v1' /></a></div>",document.body.appendChild(t),this.options.enabled=!0},Intro.prototype.update=function(t){},Intro.prototype.onBtnPlayPress=function(t){document.getElementById("lic_link").style.display="none",global_game_sound.play("play"),global_player_movement=!0,this.app.timeScale=1,document.fullscreenElement,global_game_startTime=new Date,this.entity.enabled=!1};var pos_player,posX_cam,posZ_cam,CameraTarget=pc.createScript("cameraTarget");CameraTarget.attributes.add("player",{type:"entity"}),CameraTarget.prototype.initialize=function(){posY_cam=this.entity.getPosition().y,posZ_cam=this.entity.getPosition().z},CameraTarget.prototype.update=function(t){this.player&&(pos_player=this.player.getPosition(),this.entity.setPosition(pos_player.x,posY_cam,pos_player.z+posZ_cam))};var PlayerController=pc.createScript("playerController");PlayerController.attributes.add("speed",{type:"number",default:.15}),PlayerController.attributes.add("spriteBody",{type:"entity"});var deltaTime,directionActive,force=new pc.Vec3;PlayerController.prototype.initialize=function(){},PlayerController.prototype.update=function(e){if(global_player_movement){deltaTime=e;var t=0,r=0;if((this.app.keyboard.isPressed(pc.KEY_A)||this.app.keyboard.isPressed(pc.KEY_LEFT)||btn_left_pressed)&&(this.rotatePlayer(-90),directionActive=!0),(this.app.keyboard.isPressed(pc.KEY_D)||this.app.keyboard.isPressed(pc.KEY_RIGHT)||btn_right_pressed)&&(this.rotatePlayer(90),directionActive=!0),(this.app.keyboard.isPressed(pc.KEY_W)||this.app.keyboard.isPressed(pc.KEY_UP)||btn_up_pressed)&&(this.rotatePlayer(180),directionActive=!0),(this.app.keyboard.isPressed(pc.KEY_S)||this.app.keyboard.isPressed(pc.KEY_DOWN)||btn_down_pressed)&&(this.rotatePlayer(0),directionActive=!0),directionActive){var i=this.entity.forward;t-=i.x,r-=i.z}var s=directionActive;if(directionActive=!1,0!==t||0!==r){var a=new pc.Vec3(t,0,r).normalize().scale(this.speed/deltaTime);this.entity.rigidbody.linearVelocity=new pc.Vec3(a.x,0,a.z)}else this.entity.rigidbody.linearVelocity=new pc.Vec3(0,0,0);if(s)var o=this.entity.getEulerAngles().y;this.spriteBody.setEulerAngles(new pc.Vec3(0,o,0))}},PlayerController.prototype.rotatePlayer=function(e){var t=new pc.Vec3(0,e,0);this.entity.setEulerAngles(t)};var action,PlayerAnimation=pc.createScript("playerAnimation");PlayerAnimation.attributes.add("btn_up",{type:"entity"}),PlayerAnimation.attributes.add("btn_down",{type:"entity"}),PlayerAnimation.attributes.add("btn_left",{type:"entity"}),PlayerAnimation.attributes.add("btn_right",{type:"entity"}),PlayerAnimation.attributes.add("spriteBody",{type:"entity"});var btn_up_pressed=!1,btn_down_pressed=!1,btn_left_pressed=!1,btn_right_pressed=!1;PlayerAnimation.prototype.initialize=function(){this.app.keyboard.on(pc.EVENT_KEYDOWN,this.keyChange,this),this.app.keyboard.on(pc.EVENT_KEYUP,this.keyChange,this),this.btn_up.element.on("mousedown",this.onBtnUpPress,this),this.btn_up.element.on("mouseup",this.onBtnUpRelease,this),this.btn_down.element.on("mousedown",this.onBtnDownPress,this),this.btn_down.element.on("mouseup",this.onBtnDownRelease,this),this.btn_left.element.on("mousedown",this.onBtnLeftPress,this),this.btn_left.element.on("mouseup",this.onBtnLeftRelease,this),this.btn_right.element.on("mousedown",this.onBtnRightPress,this),this.btn_right.element.on("mouseup",this.onBtnRightRelease,this),this.btn_up.element.on("touchstart",this.onBtnUpPress,this),this.btn_up.element.on("touchend",this.onBtnUpRelease,this),this.btn_down.element.on("touchstart",this.onBtnDownPress,this),this.btn_down.element.on("touchend",this.onBtnDownRelease,this),this.btn_left.element.on("touchstart",this.onBtnLeftPress,this),this.btn_left.element.on("touchend",this.onBtnLeftRelease,this),this.btn_right.element.on("touchstart",this.onBtnRightPress,this),this.btn_right.element.on("touchend",this.onBtnRightRelease,this),this.setState("idleFront"),this.entity.sound.slot("step").volume=0,this.entity.sound.play("step")},PlayerAnimation.prototype.update=function(t){},PlayerAnimation.prototype.checkButtons=function(){action=this.app.keyboard.isPressed(pc.KEY_A)||this.app.keyboard.isPressed(pc.KEY_LEFT)?"walkLeft":this.app.keyboard.isPressed(pc.KEY_D)||this.app.keyboard.isPressed(pc.KEY_RIGHT)?"walkRight":this.app.keyboard.isPressed(pc.KEY_W)||this.app.keyboard.isPressed(pc.KEY_UP)?"walkUp":this.app.keyboard.isPressed(pc.KEY_S)||this.app.keyboard.isPressed(pc.KEY_DOWN)?"walkDown":"idleFront"},PlayerAnimation.prototype.keyChange=function(t){if(global_player_movement){var e=action;this.checkButtons(),e!==action&&this.setState(action)}else this.entity.sound.slot("step").volume=0,action="idleFront",this.setState(action)},PlayerAnimation.prototype.setState=function(t){this.state=t,t.includes("walk")?this.entity.sound.slot("step").volume=.5:this.entity.sound.slot("step").volume=0,this.spriteBody.sprite.play(t,.2)},PlayerAnimation.prototype.onBtnUpPress=function(t){action="walkUp",this.setState(action),btn_up_pressed=!0},PlayerAnimation.prototype.onBtnUpRelease=function(t){action="idleBack",this.setState(action),btn_up_pressed=!1},PlayerAnimation.prototype.onBtnDownPress=function(t){action="walkDown",this.setState(action),btn_down_pressed=!0},PlayerAnimation.prototype.onBtnDownRelease=function(t){action="idleFront",this.setState(action),btn_down_pressed=!1},PlayerAnimation.prototype.onBtnLeftPress=function(t){action="walkLeft",this.setState(action),btn_left_pressed=!0},PlayerAnimation.prototype.onBtnLeftRelease=function(t){action="idleFront",this.setState(action),btn_left_pressed=!1},PlayerAnimation.prototype.onBtnRightPress=function(t){action="walkRight",this.setState(action),btn_right_pressed=!0},PlayerAnimation.prototype.onBtnRightRelease=function(t){action="idleFront",this.setState(action),btn_right_pressed=!1};var BounceAnimation=pc.createScript("bounceAnimation");BounceAnimation.attributes.add("init_posY",{type:"number",default:0}),BounceAnimation.attributes.add("speed",{type:"number",default:0}),BounceAnimation.attributes.add("temp_speed",{type:"number",default:0}),BounceAnimation.attributes.add("rango",{type:"number",default:0}),BounceAnimation.prototype.initialize=function(){this.temp_speed=this.speed,this.init_posY=this.entity.getLocalPosition().y},BounceAnimation.prototype.update=function(t){this.entity.getLocalPosition().y>=this.init_posY+this.rango&&(this.temp_speed=-this.speed),this.entity.getLocalPosition().y<=this.init_posY-this.rango&&(this.temp_speed=this.speed),this.entity.translate(0,this.temp_speed*t,0)};var MailController=pc.createScript("mailController");MailController.attributes.add("message_box",{type:"entity"}),MailController.attributes.add("btn_ok",{type:"entity"}),MailController.attributes.add("btn_mail",{type:"entity"}),MailController.attributes.add("list_cheks",{type:"entity",array:!0}),MailController.attributes.add("check_icon",{type:"asset",assetType:"texture"}),MailController.attributes.add("ed_mail",{type:"entity"}),MailController.attributes.add("ss_mail",{type:"entity"}),MailController.prototype.initialize=function(){this.btn_ok.element.on("mousedown",this.onBtnOkPress,this),this.btn_ok.element.on("touchstart",this.onBtnOkPress,this),this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},MailController.prototype.update=function(t){},MailController.prototype.activeMail=function(t){if(t){this.message_box.enabled=!0,this.btn_mail.enabled=!1,global_player_movement=!1;for(var e=0;e<global_game_activity;e++)this.list_cheks[e].element.texture=this.check_icon.resource}else global_game_sound.play("ok"),this.message_box.enabled=!1,this.ed_mail.enabled=!1,this.ss_mail.enabled=!1,global_player_movement=!0},MailController.prototype.onBtnOkPress=function(t){this.activeMail(!1)},MailController.prototype.onBtnMailPress=function(t){},MailController.prototype.onTriggerEnter=function(t){this.activeMail(!0)};var Rotate=pc.createScript("rotate"),speed=new pc.Vec3(0,90,0);Rotate.prototype.initialize=function(){},Rotate.prototype.update=function(t){this.entity.rotate(speed.x*t,speed.y*t,speed.z*t)};var SendAnimation=pc.createScript("sendAnimation");SendAnimation.attributes.add("init_posY",{type:"number",default:0}),SendAnimation.attributes.add("speed",{type:"number",default:1.15}),SendAnimation.attributes.add("step",{type:"number",default:0}),SendAnimation.prototype.initialize=function(){},SendAnimation.prototype.update=function(t){this.step===global_game_step&&(this.entity.getLocalPosition().y>=this.init_posY+4&&(this.entity.enabled=!1),this.entity.translate(0,this.speed*t,0))};var DoorAnimation=pc.createScript("doorAnimation");DoorAnimation.attributes.add("collider",{type:"entity"}),DoorAnimation.attributes.add("init_posX",{type:"number",default:0}),DoorAnimation.attributes.add("speed",{type:"number",default:0}),DoorAnimation.attributes.add("step",{type:"number",default:0}),DoorAnimation.attributes.add("width",{type:"number",default:0}),DoorAnimation.prototype.initialize=function(){this.init_posX=this.entity.getLocalPosition().x},DoorAnimation.prototype.update=function(t){this.step===global_game_step&&(this.entity.getLocalPosition().x>=this.init_posX-this.width&&this.entity.translate(this.speed*t,0,0),this.entity.getLocalPosition().x<=this.init_posX-this.width/2&&this.collider.rigidbody.teleport(this.init_posX-this.width,this.collider.getPosition().y,this.collider.getPosition().z))};var MatchAnimation=pc.createScript("matchAnimation");MatchAnimation.attributes.add("report1",{type:"entity"}),MatchAnimation.attributes.add("report2",{type:"entity"}),MatchAnimation.attributes.add("alert",{type:"entity"}),MatchAnimation.attributes.add("speed1",{type:"number",default:-2.5}),MatchAnimation.attributes.add("speed2",{type:"number",default:-2.2}),MatchAnimation.attributes.add("final_posY",{type:"number",default:1.7}),MatchAnimation.prototype.initialize=function(){this.report1.setLocalPosition(this.report1.getLocalPosition().x,4,this.report1.getLocalPosition().z),this.report2.setLocalPosition(this.report2.getLocalPosition().x,4,this.report2.getLocalPosition().z)},MatchAnimation.prototype.update=function(t){this.report1.getLocalPosition().y>=this.final_posY&&this.report1.translate(0,this.speed1*t,0),this.report2.getLocalPosition().y>=this.final_posY&&this.report2.translate(0,this.speed2*t,0),this.report2.getLocalPosition().y<=this.final_posY&&(this.alert.enabled=!0)};var Chats=pc.createScript("chats");Chats.attributes.add("chat_box",{type:"entity"}),Chats.attributes.add("phrase",{type:"entity"}),Chats.attributes.add("icon",{type:"asset",assetType:"texture"}),Chats.attributes.add("icon_box",{type:"entity"}),Chats.attributes.add("icon_alert",{type:"entity"}),Chats.attributes.add("player",{type:"entity"}),Chats.attributes.add("body_npc",{type:"entity"}),Chats.attributes.add("phraseData",{type:"asset",array:!1,assetType:"json"}),Chats.attributes.add("chats",{type:"number",array:!0}),Chats.attributes.add("current_dialog",{type:"number",default:0}),Chats.attributes.add("animation_name",{type:"string",array:!0});var phraseData=null;Chats.prototype.initialize=function(){this.chat_box.enabled=!1,this.entity.collision.on("triggerenter",this.onTriggerEnter,this),this.entity.collision.on("triggerleave",this.onTriggerLeave,this),phraseData=this.phraseData.resource,txt_element=this.phrase.element,j=0,k=0,timer=null,txt_dialog=""},Chats.prototype.update=function(t){this.animateText()},Chats.prototype.sentence=function(t){return this.parsePhraseData(phraseData,t)[0]},Chats.prototype.parsePhraseData=function(t,e){for(var a=[],i=t.phrases,s=0;s<i.length;s++){var n=i[s];n.level==e&&a.push(n)}return a},Chats.prototype.onTriggerEnter=function(t){this.player.rigidbody&&(global_game_sound.play("chat"),txt_element.text="",txt_dialog="",j=0,k=0,this.icon_box.element.texture=this.icon.resource,this.current_dialog=Math.floor(Math.random()*this.chats.length),this.entity.tags.list().length>0?("F"==this.entity.tags.list()[0]&&(txt_dialog=this.sentence(this.chats[this.current_dialog]).text.replace("@conta",this.sentence(90).text)),"M"==this.entity.tags.list()[0]&&(txt_dialog=this.sentence(this.chats[this.current_dialog]).text.replace("@conta",this.sentence(89).text))):txt_dialog=this.sentence(this.chats[this.current_dialog]).text,this.chat_box.enabled=!0,this.icon_alert.enabled=!1)},Chats.prototype.onTriggerLeave=function(t){this.player.rigidbody&&(this.chat_box.enabled=!1,this.icon_alert.enabled=!0,this.body_npc&&this.animation_name.length>0&&this.body_npc.animation.play(this.animation_name[0],.2))},Chats.prototype.animateText=function(){try{j<parseInt(txt_dialog.length/6)+1&&(txt_element.text+=txt_dialog.substring(k,k+6),k+=6,j++)}catch(t){}};var MainDoorAnimation=pc.createScript("mainDoorAnimation");MainDoorAnimation.attributes.add("md1",{type:"entity"}),MainDoorAnimation.attributes.add("md2",{type:"entity"}),MainDoorAnimation.attributes.add("collider_md1",{type:"entity"}),MainDoorAnimation.attributes.add("collider_md2",{type:"entity"}),MainDoorAnimation.attributes.add("init_posX",{type:"number",default:0}),MainDoorAnimation.attributes.add("width",{type:"number",default:0}),MainDoorAnimation.attributes.add("speed1",{type:"number",default:0}),MainDoorAnimation.attributes.add("speed2",{type:"number",default:0}),MainDoorAnimation.attributes.add("player",{type:"entity"}),MainDoorAnimation.attributes.add("ss_maindoor",{type:"entity"}),MainDoorAnimation.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this),this.entity.collision.on("triggerleave",this.onTriggerLeave,this),this.init_md1_posX=this.md1.getLocalPosition().x,this.init_md2_posX=this.md2.getLocalPosition().x,openDoor=!1},MainDoorAnimation.prototype.update=function(i){openDoor?(this.md1.getLocalPosition().x>=this.init_md1_posX-this.width&&this.md1.translate(this.speed1*i,0,0),this.md1.getLocalPosition().x<=this.init_md1_posX-this.width/2&&this.collider_md1.rigidbody.teleport(this.init_md1_posX-this.width,this.collider_md1.getPosition().y,this.collider_md1.getPosition().z),this.md2.getLocalPosition().x<=this.init_md2_posX+this.width&&this.md2.translate(this.speed2*i,0,0),this.md2.getLocalPosition().x>=this.init_md2_posX+this.width/2&&this.collider_md2.rigidbody.teleport(this.init_md2_posX+this.width,this.collider_md2.getPosition().y,this.collider_md2.getPosition().z)):(this.md1.getLocalPosition().x<=this.init_md1_posX&&this.md1.translate(this.speed2*i,0,0),this.md1.getLocalPosition().x>=this.init_md1_posX&&this.collider_md1.rigidbody.teleport(this.init_md1_posX+this.width,this.collider_md1.getPosition().y,this.collider_md1.getPosition().z),this.md2.getLocalPosition().x>=this.init_md2_posX&&this.md2.translate(this.speed1*i,0,0),this.md2.getLocalPosition().x<=this.init_md2_posX&&this.collider_md2.rigidbody.teleport(this.init_md2_posX-this.width,this.collider_md2.getPosition().y,this.collider_md2.getPosition().z))},MainDoorAnimation.prototype.onTriggerEnter=function(i){this.player.rigidbody&&(global_game_sound.play("open"),openDoor=!0,this.ss_maindoor.enabled=!1,global_player_enter=!0,global_game_sound.play("base"))},MainDoorAnimation.prototype.onTriggerLeave=function(i){this.player.rigidbody&&(global_game_sound.play("close"),openDoor=!1)};var MailBox=pc.createScript("mailBox");MailBox.attributes.add("btn_ok",{type:"entity"}),MailBox.prototype.initialize=function(){this.btn_ok.element.on("mousedown",this.onBtnOkPress,this),this.btn_ok.element.on("touchstart",this.onBtnOkPress,this)},MailBox.prototype.update=function(t){},MailBox.prototype.onBtnOkPress=function(t){global_player_movement=!0,this.app.timeScale=1,this.entity.enabled=!1};var Keyboard=pc.createScript("keyboard");Keyboard.attributes.add("keys",{type:"entity",array:!0}),Keyboard.attributes.add("txt_myname",{type:"entity"}),Keyboard.attributes.add("btn_del",{type:"entity"}),Keyboard.attributes.add("welcome_screen",{type:"entity"}),Keyboard.attributes.add("btn_ok",{type:"entity"}),Keyboard.prototype.initialize=function(){for(var t=0;t<this.keys.length;t++)this.keys[t].element.on("mousedown",this.onBtnKeyPress,this),this.keys[t].element.on("touchstart",this.onBtnKeyPress,this);this.btn_del.element.on("mousedown",this.onBtnDeletePress,this),this.btn_ok.element.on("mousedown",this.onBtnOkPress,this),this.btn_del.element.on("touchstart",this.onBtnDeletePress,this),this.btn_ok.element.on("touchstart",this.onBtnOkPress,this)},Keyboard.prototype.update=function(t){},Keyboard.prototype.onBtnKeyPress=function(t){global_game_sound.play("key"),this.txt_myname.element.text.length<=10&&(this.txt_myname.element.text+=t.element.entity.tags.list()[0])},Keyboard.prototype.onBtnDeletePress=function(t){global_game_sound.play("key"),this.txt_myname.element.text=this.txt_myname.element.text.slice(0,-1)},Keyboard.prototype.onBtnOkPress=function(t){""!==this.txt_myname.element.text?(global_game_sound.play("ok"),global_game_player_name=this.txt_myname.element.text,this.welcome_screen.enabled=!0,this.entity.enabled=!1):global_game_sound.play("err")};pc.script.createLoadingScreen((function(e){var t,a;t=["body {","    background-color: #3C5F9C;","}","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #3C5F9C;","}","#application-splash {","    position: absolute;","    top: calc(50% - 88px);","    width: 264px;","    left: calc(50% - 132px);","}","#application-splash img {","    width: 100%;","}","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 2px;","    width: 100%;","    background-color: #1d292c;","}","#progress-bar {","    width: 0%;","    height: 100%;","    background-color: #34a1eb;","}","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),document.head.appendChild(a),function(){var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var t=document.createElement("div");t.id="application-splash",e.appendChild(t),t.style.display="none";var a=document.createElement("img");a.src="https://pemuned.github.io/logos/logo_multimedia.png",t.appendChild(a),a.onload=function(){t.style.display="block"};var o=document.createElement("div");o.id="progress-bar-container",t.appendChild(o);var n=document.createElement("div");n.id="progress-bar",o.appendChild(n)}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var t=document.getElementById("progress-bar");t&&(e=Math.min(1,Math.max(0,e)),t.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));var Options=pc.createScript("options");Options.attributes.add("btn_pause",{type:"entity"}),Options.attributes.add("btn_fullscreen",{type:"entity"}),Options.attributes.add("screen_pause",{type:"entity"}),Options.attributes.add("btn_continue",{type:"entity"}),Options.attributes.add("touch_controls",{type:"entity"}),Options.attributes.add("chat_box",{type:"entity"}),Options.attributes.add("message_box",{type:"entity"}),Options.attributes.add("mail_box",{type:"entity"}),Options.attributes.add("score",{type:"entity"}),Options.prototype.initialize=function(){pause=!1,this.btn_pause.element.on("mousedown",this.onBtnPausePress,this),this.btn_continue.element.on("mousedown",this.onBtnPausePress,this),this.btn_fullscreen.element.on("mousedown",this.onBtnFullScreenPress,this),this.btn_pause.element.on("touchstart",this.onBtnPausePress,this),this.btn_continue.element.on("touchstart",this.onBtnPausePress,this),this.btn_fullscreen.element.on("touchstart",this.onBtnFullScreenPress,this)},Options.prototype.update=function(t){this.chat_box.enabled||this.message_box.enabled||this.mail_box.enabled?this.btn_pause.enabled=!1:global_player_enter&&(this.btn_pause.enabled=!0),this.message_box.enabled||this.mail_box.enabled?this.touch_controls.enabled=!1:pc.platform.mobile&&!pause&&global_player_movement&&(this.touch_controls.enabled=!0)},Options.prototype.onBtnPausePress=function(t){global_game_sound.play("key"),pause=!pause,pause?(global_player_movement=!1,global_game_sound.volume=0,this.app.timeScale=0,this.screen_pause.enabled=!0,this.touch_controls.enabled=!1,this.score.enabled=!1,document.getElementById("lic_link").style.display="block"):(document.getElementById("lic_link").style.display="none",global_player_movement=!0,global_game_sound.volume=1,this.app.timeScale=1,this.screen_pause.enabled=!1,global_game_step>2&&(this.score.enabled=!0),pc.platform.mobile&&(this.touch_controls.enabled=!0))},Options.prototype.onBtnFullScreenPress=function(t){global_game_sound.play("key")};var EndGame=pc.createScript("endGame");EndGame.attributes.add("btn_share",{type:"entity"}),EndGame.attributes.add("btn_download",{type:"entity"}),EndGame.attributes.add("congrats_box",{type:"entity"}),EndGame.attributes.add("background",{type:"entity"}),EndGame.attributes.add("screen_game",{type:"entity"}),EndGame.attributes.add("lbl_time",{type:"entity"}),EndGame.prototype.initialize=function(){this.btn_share.element.on("mousedown",this.onBtnSharePress,this),this.btn_download.element.on("mousedown",this.onBtnDownloadPress,this),this.btn_share.element.on("touchstart",this.onBtnSharePress,this),this.btn_download.element.on("touchstart",this.onBtnDownloadPress,this),this.congrats_box.enabled=!1,this.background.element.opacity=0,this.screen_game.enabled=!1,global_game_sound.play("play"),endTime=new Date,elapsed=(endTime-global_game_startTime)/1e3/60},EndGame.prototype.update=function(e){this.background.element.opacity<=1&&(this.background.element.opacity+=e),this.background.element.opacity>=1&&(this.lbl_time.element.text="Tiempo de juego: "+elapsed.toFixed(0)+" minutos",this.congrats_box.enabled=!0,this.app.timeScale=0,this.screen_game.enabled=!1,global_game_sound.stop("base"))},EndGame.prototype.onBtnSharePress=function(e){global_game_sound.play("key");var t="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent("http://flappybird.playcanvas.com/")+"&quote=He completado el juego ofiCONTA. Si aspiras a ser contador, este juego es para t√≠.",a=window.open(t,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600");window.focus&&a&&a.focus()},EndGame.prototype.onBtnDownloadPress=function(e){global_game_sound.play("key"),this.app.timeScale=0;var t=new Date,a=document.getElementById("application-canvas"),n=(a.getContext("experimental-webgl",{preserveDrawingBuffer:!0}),a.toDataURL("data:image/png;base64,")),o=document.createElement("span");o.innerHTML="<a id='download' href='"+n+"' download='"+global_game_player_name+"_"+t.getTime()+".png' onClick=''></a>",document.body.appendChild(o),document.getElementById("download").click(),document.body.removeChild(document.body.lastElementChild)};var DeliveryAnimation=pc.createScript("deliveryAnimation");DeliveryAnimation.attributes.add("npc",{type:"entity"}),DeliveryAnimation.attributes.add("run_limit1",{type:"entity"}),DeliveryAnimation.attributes.add("run_limit2",{type:"entity"}),DeliveryAnimation.attributes.add("run_limit3",{type:"entity"}),DeliveryAnimation.attributes.add("speed",{type:"number",default:-1}),DeliveryAnimation.attributes.add("step",{type:"number",default:0}),DeliveryAnimation.attributes.add("item",{type:"entity"}),DeliveryAnimation.prototype.initialize=function(){rotate_npc=!1,stop1_npc=!1,stop2_npc=!1,global_player_movement=!1},DeliveryAnimation.prototype.update=function(t){this.step==global_game_step?this.entity.getLocalPosition().z>=this.run_limit1.getLocalPosition().z?(this.entity.translate(0,0,this.speed*t),console.log(this.entity.getLocalPosition().z),console.log(this.run_limit1.getLocalPosition().z)):(rotate_npc||(this.entity.rotate(0,90,0),rotate_npc=!0),this.entity.getLocalPosition().x>=this.run_limit2.getLocalPosition().x?this.entity.translate(this.speed*t,0,0):stop1_npc||(this.npc.animation.play("Talking"),stop1_npc=!0)):(stop2_npc||(this.entity.rotate(0,90,0),this.item.enabled=!1,this.npc.animation.play("Running"),stop2_npc=!0),this.entity.getLocalPosition().z<=this.run_limit3.getLocalPosition().z?(this.speed=10,this.entity.translate(0,0,this.speed*t)):this.entity.enabled=!1)};class InitDrawer extends pc.ScriptType{initialize(){const e=this.app.root.findByName("Camera");new AmmoDebugDrawer({limit:{entity:e,distance:50}}).enabled=!0}}pc.registerScript(InitDrawer,"initDrawer");class AmmoDebugDrawer{constructor(e={}){if(!window.Ammo)return void console.warn("Warning! Trying to initialize Ammo Debug Drawer without Ammo lib in the project. Aborting.");const t=pc.Application.getApplication(),o=t.scene.layers,n=this,r=e.layer||o.getLayerByName("Debug Draw")||o.getLayerById(pc.LAYERID_UI),{entity:s,distance:i,ignorePartials:a}=e.limit||{},c=new AmmoDebugDrawer.Pool,d=new pc.Vec3,u=new pc.Vec3;new pc.Vec3;let l=1,p=!1;const m=new Ammo.DebugDrawer;m.drawLine=function drawLine(e,t,o){const n=Ammo.wrapPointer(e,Ammo.btVector3),r=Ammo.wrapPointer(t,Ammo.btVector3),l=Ammo.wrapPointer(o,Ammo.btVector3);if(s){d.set(n.x(),n.y(),n.z()),u.set(r.x(),r.y(),r.z());const e=s.getPosition(),t=e.distance(d),o=e.distance(u);(t<i&&o<i||s&&!a&&(t<i||o<i))&&(c.pushPos(d.x,d.y,d.z,u.x,u.y,u.z),c.pushColor(l.x(),l.y(),l.z(),1,l.x(),l.y(),l.z(),1))}else c.pushPos(n.x(),n.y(),n.z(),r.x(),r.y(),r.z()),c.pushColor(l.x(),l.y(),l.z(),1,l.x(),l.y(),l.z(),1)}.bind(this),m.drawContactPoint=function drawContactPoint(e,t,o,n,r){const s=Ammo.wrapPointer(e,Ammo.btVector3),i=Ammo.wrapPointer(t,Ammo.btVector3),a=Ammo.wrapPointer(r,Ammo.btVector3),d=s.x(),u=s.y(),l=s.z();c.pushPos(d,u,l,d+.5*i.x(),u+.5*i.y(),l+.5*i.z()),c.pushColor(a.x(),a.y(),a.z(),1,a.x(),a.y(),a.z(),1)}.bind(this),m.reportErrorWarning=function reportErrorWarning(e){}.bind(this),m.draw3dText=function draw3dText(e,t){}.bind(this),m.setDebugMode=function setDebugMode(e){l=e}.bind(this),m.getDebugMode=function getDebugMode(){return l}.bind(this),m.enable=function enable(){n.enabled=!0}.bind(this),m.disable=disable.bind(this),m.update=update.bind(this);const b=t.systems.rigidbody.dynamicsWorld;function clear(){c.clear()}function disable(){n.enabled=!1}function update(){p&&b.debugDrawWorld()}function postUpdate(){p&&(!function draw(){try{c.entries.forEach((e=>{t.drawLineArrays(e.positions,e.colors,!1,r)}))}catch(e){console.warn("Error drawing debug lines",e),disable()}}(),clear())}b.setDebugDrawer(m),n.clear=clear,n.toggle=function toggle(){n.enabled=!p},Object.defineProperties(n,{enabled:{get:()=>p,set:e=>{p=e,p?(t.systems.on("update",update,n),t.systems.on("postUpdate",postUpdate,n)):(t.systems.off("update",update,n),t.systems.off("postUpdate",postUpdate,n),clear())}},mode:{get:()=>l,set:e=>{l=e}}})}}AmmoDebugDrawer.Pool=class Pool{constructor(){const e=this,t=new Map;let o=0;function _add(e){const o={positions:[],colors:[]};return t.set(e,o),o}function _getEntry(e,n){let r=t.get(o);return r[e].length+n>64e3&&(r=_add(++o)),r}t.set(o,{positions:[],colors:[]}),e.entries=t,e.clear=function clear(){t.clear(),o=0,_add(o)},e.pushColor=function pushColor(e,t,o,n,r,s,i,a){_getEntry("colors",8).colors.push(e,t,o,n,r,s,i,a)},e.pushPos=function pushPos(e,t,o,n,r,s){_getEntry("positions",6).positions.push(e,t,o,n,r,s)},_add(o)}};