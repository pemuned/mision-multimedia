var app_version="2025.11.21";pc.script.createLoadingScreen((function(e){var t,a;t=["body {","    background-color: #222750;","}","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #222750;","}","#application-splash {","    position: absolute;","    top: calc(50% - 88px);","    width: 264px;","    left: calc(50% - 132px);","}","#application-splash img {","    width: 100%;","}","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 20px;","    width: 100%;","    background-color: #0b0f27ff;","    border-radius: 10px;","    position: relative;","    overflow: hidden;","    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.3);","}","#progress-bar-container::before {",'    content: "";',"    position: absolute;","    top: 0;","    left: -100%;","    width: 100%;","    height: 100%;","    background: linear-gradient(90deg, transparent, rgba(52, 161, 235, 0.1), transparent);","    animation: scanning 2s linear infinite;","}","@keyframes scanning {","    0% { left: -100%; }","    100% { left: 100%; }","}","#progress-bar {","    width: 0%;","    height: 100%;","    background: linear-gradient(90deg, #2980b9 0%, #34a1eb 100%);","    border-radius: 10px;","    position: relative;","    transition: width 0.3s ease-out;","    box-shadow: 0 0 10px rgba(52, 161, 235, 0.5), 0 0 20px rgba(52, 161, 235, 0.3);","}","#progress-shine {","    position: absolute;","    top: 0;","    left: 0;","    width: 100%;","    height: 100%;","    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.4) 50%, transparent 100%);","    animation: shine 1.5s ease-in-out infinite;","}","#version-text {","    position: absolute;","    bottom: 5px;","    right: 5px;","    color: #dedcfc;","    font-size: 0.5em;","    font-family: Courier New;","}","@keyframes shine {","    0% { transform: translateX(-100%); }","    100% { transform: translateX(100%); }","}","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),document.head.appendChild(a),function(){var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var t=document.createElement("div");t.id="application-splash",e.appendChild(t),t.style.display="none";var a=document.createElement("img");a.src="https://pemuned.github.io/logos/logo_multimedia.png",t.appendChild(a),a.onload=function(){t.style.display="block"};var n=document.createElement("div");n.id="progress-bar-container",t.appendChild(n);var i=document.createElement("div");i.id="progress-bar",n.appendChild(i);var o=document.createElement("div");o.id="progress-shine",i.appendChild(o);var r=document.createElement("div");r.id="version-text",r.innerHTML="v"+app_version,e.appendChild(r)}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var t=document.getElementById("progress-bar");t&&(e=Math.min(1,Math.max(0,e)),t.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));function HueSaturationEffect(t){pc.PostEffect.call(this,t);var e=["uniform sampler2D uColorBuffer;","uniform float uHue;","uniform float uSaturation;","","varying vec2 vUv0;","","void main() {","    gl_FragColor = texture2D( uColorBuffer, vUv0 );","","    float angle = uHue * 3.14159265;","    float s = sin(angle), c = cos(angle);","    vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;","    float len = length(gl_FragColor.rgb);","    gl_FragColor.rgb = vec3(","        dot(gl_FragColor.rgb, weights.xyz),","        dot(gl_FragColor.rgb, weights.zxy),","        dot(gl_FragColor.rgb, weights.yzx)","    );","","    float average = (gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0;","    if (uSaturation > 0.0) {","        gl_FragColor.rgb += (average - gl_FragColor.rgb) * (1.0 - 1.0 / (1.001 - uSaturation));","    } else {","        gl_FragColor.rgb += (average - gl_FragColor.rgb) * (-uSaturation);","    }","}"].join("\n");this.shader=pc.ShaderUtils.createShader(t,{uniqueName:"HueSaturationShader",attributes:{aPosition:pc.SEMANTIC_POSITION},vertexGLSL:pc.PostEffect.quadVertexShader,fragmentGLSL:e}),this.hue=0,this.saturation=0}HueSaturationEffect.prototype=Object.create(pc.PostEffect.prototype),HueSaturationEffect.prototype.constructor=HueSaturationEffect,Object.assign(HueSaturationEffect.prototype,{render:function(t,e,a){var r=this.device.scope;r.resolve("uHue").setValue(this.hue),r.resolve("uSaturation").setValue(this.saturation),r.resolve("uColorBuffer").setValue(t.colorBuffer),this.drawQuad(e,this.shader,a)}});var HueSaturation=pc.createScript("hueSaturation");HueSaturation.attributes.add("hue",{type:"number",default:0,min:-1,max:1,title:"Hue"}),HueSaturation.attributes.add("saturation",{type:"number",default:0,min:-1,max:1,title:"Saturation"}),HueSaturation.prototype.initialize=function(){this.effect=new HueSaturationEffect(this.app.graphicsDevice),this.effect.hue=this.hue,this.effect.saturation=this.saturation,this.on("attr",(function(t,e){this.effect[t]=e}),this);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))};var SAMPLE_COUNT=15;function computeGaussian(e,t){return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-e*e/(2*t*t))}function calculateBlurValues(e,t,o,r,s){e[0]=computeGaussian(0,s),t[0]=0,t[1]=0;var i,a,l=e[0];for(i=0,a=Math.floor(SAMPLE_COUNT/2);i<a;i++){var u=computeGaussian(i+1,s);e[2*i]=u,e[2*i+1]=u,l+=2*u;var h=2*i+1.5;t[4*i]=o*h,t[4*i+1]=r*h,t[4*i+2]=-o*h,t[4*i+3]=-r*h}for(i=0,a=e.length;i<a;i++)e[i]/=l}function BloomEffect(e){pc.PostEffect.call(this,e);var t={aPosition:pc.SEMANTIC_POSITION},o=["varying vec2 vUv0;","","uniform sampler2D uBaseTexture;","uniform float uBloomThreshold;","","void main(void)","{","    vec4 color = texture2D(uBaseTexture, vUv0);","","    gl_FragColor = clamp((color - uBloomThreshold) / (1.0 - uBloomThreshold), 0.0, 1.0);","}"].join("\n"),r=[`#define SAMPLE_COUNT ${SAMPLE_COUNT}`,"","varying vec2 vUv0;","","uniform sampler2D uBloomTexture;",`uniform vec2 uBlurOffsets[${SAMPLE_COUNT}];`,`uniform float uBlurWeights[${SAMPLE_COUNT}];`,"","void main(void)","{","    vec4 color = vec4(0.0);","    for (int i = 0; i < SAMPLE_COUNT; i++)","    {","        color += texture2D(uBloomTexture, vUv0 + uBlurOffsets[i]) * uBlurWeights[i];","    }","","    gl_FragColor = color;","}"].join("\n"),s=["varying vec2 vUv0;","","uniform float uBloomEffectIntensity;","uniform sampler2D uBaseTexture;","uniform sampler2D uBloomTexture;","","void main(void)","{","    vec4 bloom = texture2D(uBloomTexture, vUv0) * uBloomEffectIntensity;","    vec4 base = texture2D(uBaseTexture, vUv0);","","    base *= (1.0 - clamp(bloom, 0.0, 1.0));","","    gl_FragColor = base + bloom;","}"].join("\n");this.extractShader=pc.ShaderUtils.createShader(e,{uniqueName:"BloomExtractShader",attributes:t,vertexGLSL:pc.PostEffect.quadVertexShader,fragmentGLSL:o}),this.blurShader=pc.ShaderUtils.createShader(e,{uniqueName:"BloomBlurShader",attributes:t,vertexGLSL:pc.PostEffect.quadVertexShader,fragmentGLSL:r}),this.combineShader=pc.ShaderUtils.createShader(e,{uniqueName:"BloomCombineShader",attributes:t,vertexGLSL:pc.PostEffect.quadVertexShader,fragmentGLSL:s}),this.targets=[],this.bloomThreshold=.25,this.blurAmount=4,this.bloomIntensity=1.25,this.sampleWeights=new Float32Array(SAMPLE_COUNT),this.sampleOffsets=new Float32Array(2*SAMPLE_COUNT)}BloomEffect.prototype=Object.create(pc.PostEffect.prototype),BloomEffect.prototype.constructor=BloomEffect,BloomEffect.prototype._destroy=function(){var e;if(this.targets)for(e=0;e<this.targets.length;e++)this.targets[e].destroyTextureBuffers(),this.targets[e].destroy();this.targets.length=0},BloomEffect.prototype._resize=function(e){var t,o=e.colorBuffer.width,r=e.colorBuffer.height;if(o!==this.width||r!==this.height)for(this.width=o,this.height=r,this._destroy(),t=0;t<2;t++){var s=new pc.Texture(this.device,{name:`Bloom Texture${t}`,format:pc.PIXELFORMAT_RGBA8,width:o>>1,height:r>>1,mipmaps:!1});s.minFilter=pc.FILTER_LINEAR,s.magFilter=pc.FILTER_LINEAR,s.addressU=pc.ADDRESS_CLAMP_TO_EDGE,s.addressV=pc.ADDRESS_CLAMP_TO_EDGE,s.name=`pe-bloom-${t}`;var i=new pc.RenderTarget({name:`Bloom Render Target ${t}`,colorBuffer:s,depth:!1});this.targets.push(i)}},Object.assign(BloomEffect.prototype,{render:function(e,t,o){this._resize(e);var r=this.device.scope;r.resolve("uBloomThreshold").setValue(this.bloomThreshold),r.resolve("uBaseTexture").setValue(e.colorBuffer),this.drawQuad(this.targets[0],this.extractShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,1/this.targets[1].width,0,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),this.drawQuad(this.targets[1],this.blurShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,0,1/this.targets[0].height,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[1].colorBuffer),this.drawQuad(this.targets[0],this.blurShader),r.resolve("uBloomEffectIntensity").setValue(this.bloomIntensity),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),r.resolve("uBaseTexture").setValue(e.colorBuffer),this.drawQuad(t,this.combineShader,o)}});var Bloom=pc.createScript("bloom");Bloom.attributes.add("bloomIntensity",{type:"number",default:1,min:0,title:"Intensity"}),Bloom.attributes.add("bloomThreshold",{type:"number",default:.25,min:0,max:1,title:"Threshold"}),Bloom.attributes.add("blurAmount",{type:"number",default:4,min:1,title:"Blur amount"}),Bloom.prototype.initialize=function(){this.effect=new BloomEffect(this.app.graphicsDevice),this.effect.bloomThreshold=this.bloomThreshold,this.effect.blurAmount=this.blurAmount,this.effect.bloomIntensity=this.bloomIntensity;var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("attr",(function(e,t){this.effect[e]=t}),this),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect),this.effect._destroy()}))};function BrightnessContrastEffect(t){pc.PostEffect.call(this,t);var e=["uniform sampler2D uColorBuffer;","uniform float uBrightness;","uniform float uContrast;","","varying vec2 vUv0;","","void main() {","    gl_FragColor = texture2D( uColorBuffer, vUv0 );","    gl_FragColor.rgb += uBrightness;","","    if (uContrast > 0.0) {","        gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - uContrast) + 0.5;","    } else {","        gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + uContrast) + 0.5;","    }","}"].join("\n");this.shader=pc.ShaderUtils.createShader(t,{uniqueName:"BrightnessContrastShader",attributes:{aPosition:pc.SEMANTIC_POSITION},vertexGLSL:pc.PostEffect.quadVertexShader,fragmentGLSL:e}),this.brightness=0,this.contrast=0}BrightnessContrastEffect.prototype=Object.create(pc.PostEffect.prototype),BrightnessContrastEffect.prototype.constructor=BrightnessContrastEffect,Object.assign(BrightnessContrastEffect.prototype,{render:function(t,e,s){var r=this.device.scope;r.resolve("uBrightness").setValue(this.brightness),r.resolve("uContrast").setValue(this.contrast),r.resolve("uColorBuffer").setValue(t.colorBuffer),this.drawQuad(e,this.shader,s)}});var BrightnessContrast=pc.createScript("brightnessContrast");BrightnessContrast.attributes.add("brightness",{type:"number",default:0,min:-1,max:1,title:"Brightness"}),BrightnessContrast.attributes.add("contrast",{type:"number",default:0,min:-1,max:1,title:"Contrast"}),BrightnessContrast.prototype.initialize=function(){this.effect=new BrightnessContrastEffect(this.app.graphicsDevice),this.effect.brightness=this.brightness,this.effect.contrast=this.contrast,this.on("attr",(function(t,e){this.effect[t]=e}),this);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))};class AmmoDebugDrawer{constructor(e={}){if(!window.Ammo)return void console.warn("Warning! Trying to initialize Ammo Debug Drawer without Ammo lib in the project. Aborting.");const t=pc.Application.getApplication(),o=t.scene.layers,n=this,r=e.layer||o.getLayerByName("Debug Draw")||o.getLayerById(pc.LAYERID_UI),{entity:s,distance:i,ignorePartials:a}=e.limit||{},c=new AmmoDebugDrawer.Pool,d=new pc.Vec3,u=new pc.Vec3;new pc.Vec3;let l=1,p=!1;const m=new Ammo.DebugDrawer;m.drawLine=function drawLine(e,t,o){const n=Ammo.wrapPointer(e,Ammo.btVector3),r=Ammo.wrapPointer(t,Ammo.btVector3),l=Ammo.wrapPointer(o,Ammo.btVector3);if(s){d.set(n.x(),n.y(),n.z()),u.set(r.x(),r.y(),r.z());const e=s.getPosition(),t=e.distance(d),o=e.distance(u);(t<i&&o<i||s&&!a&&(t<i||o<i))&&(c.pushPos(d.x,d.y,d.z,u.x,u.y,u.z),c.pushColor(l.x(),l.y(),l.z(),1,l.x(),l.y(),l.z(),1))}else c.pushPos(n.x(),n.y(),n.z(),r.x(),r.y(),r.z()),c.pushColor(l.x(),l.y(),l.z(),1,l.x(),l.y(),l.z(),1)}.bind(this),m.drawContactPoint=function drawContactPoint(e,t,o,n,r){const s=Ammo.wrapPointer(e,Ammo.btVector3),i=Ammo.wrapPointer(t,Ammo.btVector3),a=Ammo.wrapPointer(r,Ammo.btVector3),d=s.x(),u=s.y(),l=s.z();c.pushPos(d,u,l,d+.5*i.x(),u+.5*i.y(),l+.5*i.z()),c.pushColor(a.x(),a.y(),a.z(),1,a.x(),a.y(),a.z(),1)}.bind(this),m.reportErrorWarning=function reportErrorWarning(e){}.bind(this),m.draw3dText=function draw3dText(e,t){}.bind(this),m.setDebugMode=function setDebugMode(e){l=e}.bind(this),m.getDebugMode=function getDebugMode(){return l}.bind(this),m.enable=function enable(){n.enabled=!0}.bind(this),m.disable=disable.bind(this),m.update=update.bind(this);const b=t.systems.rigidbody.dynamicsWorld;function clear(){c.clear()}function disable(){n.enabled=!1}function update(){p&&b.debugDrawWorld()}function postUpdate(){p&&(!function draw(){try{c.entries.forEach((e=>{t.drawLineArrays(e.positions,e.colors,!1,r)}))}catch(e){console.warn("Error drawing debug lines",e),disable()}}(),clear())}b.setDebugDrawer(m),n.clear=clear,n.toggle=function toggle(){n.enabled=!p},Object.defineProperties(n,{enabled:{get:()=>p,set:e=>{p=e,p?(t.systems.on("update",update,n),t.systems.on("postUpdate",postUpdate,n)):(t.systems.off("update",update,n),t.systems.off("postUpdate",postUpdate,n),clear())}},mode:{get:()=>l,set:e=>{l=e}}})}}AmmoDebugDrawer.Pool=class Pool{constructor(){const e=this,t=new Map;let o=0;function _add(e){const o={positions:[],colors:[]};return t.set(e,o),o}function _getEntry(e,n){let r=t.get(o);return r[e].length+n>64e3&&(r=_add(++o)),r}t.set(o,{positions:[],colors:[]}),e.entries=t,e.clear=function clear(){t.clear(),o=0,_add(o)},e.pushColor=function pushColor(e,t,o,n,r,s,i,a){_getEntry("colors",8).colors.push(e,t,o,n,r,s,i,a)},e.pushPos=function pushPos(e,t,o,n,r,s){_getEntry("positions",6).positions.push(e,t,o,n,r,s)},_add(o)}};class InitDrawer extends pc.ScriptType{initialize(){const e=this.app.root.findByName("Camera");new AmmoDebugDrawer({limit:{entity:e,distance:50}}).enabled=!0}}pc.registerScript(InitDrawer,"initDrawer");var Globals=pc.createScript("globals");Globals.attributes.add("global_sounds",{type:"entity"}),Globals.attributes.add("global_css",{type:"asset",assetType:"css",title:"CSS Asset"});var global_game_step,global_game_activity,global_game_status_dialog,global_game_player_name,global_player_enter,global_game_startTime,global_game_sound,global_movement=!1,global_game_pause=!1,global_mini_game_completed=!1,global_player_gender=0,global_current_body=0,global_photo_boss="",global_photo_producer="",global_photo_designer="",global_photo_developer="",global_photo_history="",global_dialog_active=!1,global_start_game=!1;Globals.prototype.initialize=function(){global_movement=!1,global_game_sound=this.global_sounds.sound;var l=document.createElement("style");document.head.appendChild(l),l.innerHTML=this.global_css.resource||""},Globals.prototype.update=function(l){};var Intro=pc.createScript("intro");Intro.attributes.add("btn_play",{type:"entity"}),Intro.attributes.add("touch_controls",{type:"entity"}),Intro.attributes.add("options",{type:"entity"}),Intro.prototype.initialize=function(){this.btn_play.element.on("mousedown",this.onBtnPlayPress,this),this.btn_play.element.on("touchstart",this.onBtnPlayPress,this);var t="data:image/svg+xml;base64,"+btoa('<svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#000000" stroke-width="3.3599999999999994"> <path d="M16.5744 19.1999L12.6361 15.2616L11.4334 16.4643C10.2022 17.6955 9.58656 18.3111 8.92489 18.1658C8.26322 18.0204 7.96225 17.2035 7.3603 15.5696L5.3527 10.1205C4.15187 6.86106 3.55146 5.23136 4.39141 4.39141C5.23136 3.55146 6.86106 4.15187 10.1205 5.35271L15.5696 7.3603C17.2035 7.96225 18.0204 8.26322 18.1658 8.92489C18.3111 9.58656 17.6955 10.2022 16.4643 11.4334L15.2616 12.6361L19.1999 16.5744C19.6077 16.9821 19.8116 17.186 19.9058 17.4135C20.0314 17.7168 20.0314 18.0575 19.9058 18.3608C19.8116 18.5882 19.6077 18.7921 19.1999 19.1999C18.7921 19.6077 18.5882 19.8116 18.3608 19.9058C18.0575 20.0314 17.7168 20.0314 17.4135 19.9058C17.186 19.8116 16.9821 19.6077 16.5744 19.1999Z" fill="#ffffff"></path> </g><g id="SVGRepo_iconCarrier"> <path d="M16.5744 19.1999L12.6361 15.2616L11.4334 16.4643C10.2022 17.6955 9.58656 18.3111 8.92489 18.1658C8.26322 18.0204 7.96225 17.2035 7.3603 15.5696L5.3527 10.1205C4.15187 6.86106 3.55146 5.23136 4.39141 4.39141C5.23136 3.55146 6.86106 4.15187 10.1205 5.35271L15.5696 7.3603C17.2035 7.96225 18.0204 8.26322 18.1658 8.92489C18.3111 9.58656 17.6955 10.2022 16.4643 11.4334L15.2616 12.6361L19.1999 16.5744C19.6077 16.9821 19.8116 17.186 19.9058 17.4135C20.0314 17.7168 20.0314 18.0575 19.9058 18.3608C19.8116 18.5882 19.6077 18.7921 19.1999 19.1999C18.7921 19.6077 18.5882 19.8116 18.3608 19.9058C18.0575 20.0314 17.7168 20.0314 17.4135 19.9058C17.186 19.8116 16.9821 19.6077 16.5744 19.1999Z" fill="#ffffff"></path> </g></svg>');document.getElementsByTagName("body")[0].style.cursor="url("+t+") 8 8, auto",this.options.enabled=!1,document.querySelector(".version-text").innerHTML="v"+app_version},Intro.prototype.update=function(t){},Intro.prototype.onBtnPlayPress=function(t){document.fullscreenElement||document.documentElement.requestFullscreen(),global_game_sound.play("play"),global_game_sound.play("main"),global_movement=!0,this.app.timeScale=1,this.options.enabled=!0,this.entity.enabled=!1};var SelectPlayer=pc.createScript("selectPlayer");SelectPlayer.attributes.add("btn_start",{type:"entity"}),SelectPlayer.attributes.add("presentation",{type:"entity"}),SelectPlayer.attributes.add("j1",{type:"entity"}),SelectPlayer.attributes.add("j2",{type:"entity"}),SelectPlayer.attributes.add("btn_j1",{type:"entity"}),SelectPlayer.attributes.add("btn_j2",{type:"entity"}),SelectPlayer.attributes.add("select_text",{type:"entity"}),SelectPlayer.attributes.add("select_name_screen",{type:"entity"}),SelectPlayer.attributes.add("game_history",{type:"entity"}),SelectPlayer.prototype.initialize=function(){this.btn_j1.element.on("mousedown",this.onBtnJ1Press,this),this.btn_j2.element.on("mousedown",this.onBtnJ2Press,this),this.btn_start.element.on("mousedown",this.onBtnStartPress,this),this.btn_j1.element.on("touchstart",this.onBtnJ1Press,this),this.btn_j2.element.on("touchstart",this.onBtnJ2Press,this),this.btn_start.element.on("touchstart",this.onBtnStartPress,this),global_start_game=!1,j1_speed=-1,j2_speed=1,logo_speed=20,this.presentation.setLocalPosition(0,0,0),this.select_text.enabled=!1,this.btn_j1.enabled=!1,this.btn_j2.enabled=!1},SelectPlayer.prototype.update=function(t){global_start_game&&(this.presentation.getLocalPosition().y<=800&&this.presentation.translate(0,logo_speed*t,0),this.j1.getLocalPosition().x>=-260&&this.j1.translate(j1_speed*t,0,0),this.j1.getLocalPosition().x<=-260&&(this.btn_j1.enabled=!0),this.j2.getLocalPosition().x<=260&&this.j2.translate(j2_speed*t,0,0),this.j2.getLocalPosition().x>=260&&(this.btn_j2.enabled=!0),(this.btn_j1.enabled||this.btn_j2.enabled)&&(this.select_text.enabled=!0))},SelectPlayer.prototype.select=function(t){global_current_body=t},SelectPlayer.prototype.onBtnJ1Press=function(t){global_game_sound.play("ok"),this.select(0),global_player_gender=0,this.entity.enabled=!1,this.select_name_screen.enabled=!0},SelectPlayer.prototype.onBtnJ2Press=function(t){global_game_sound.play("ok"),this.select(1),global_player_gender=1,this.entity.enabled=!1,this.select_name_screen.enabled=!0},SelectPlayer.prototype.onBtnStartPress=function(t){document.fullscreenElement||document.documentElement.requestFullscreen(),global_game_sound.play("ok"),global_start_game=!0,this.btn_start.enabled=!1};var Keyboard=pc.createScript("keyboard");Keyboard.attributes.add("keys",{type:"entity",array:!0}),Keyboard.attributes.add("txt_myname",{type:"entity"}),Keyboard.attributes.add("btn_del",{type:"entity"}),Keyboard.attributes.add("welcome_screen",{type:"entity"}),Keyboard.attributes.add("btn_ok",{type:"entity"}),Keyboard.prototype.initialize=function(){for(var e=0;e<this.keys.length;e++)this.keys[e].element.on("mousedown",this.onBtnKeyPress,this),this.keys[e].element.on("touchstart",this.onBtnKeyPress,this);this.btn_del.element.on("mousedown",this.onBtnDeletePress,this),this.btn_ok.element.on("mousedown",this.onBtnOkPress,this),this.btn_del.element.on("touchstart",this.onBtnDeletePress,this),this.btn_ok.element.on("touchstart",this.onBtnOkPress,this),window.addEventListener("keydown",function(e){1===e.key.length?(e.key>="a"&&e.key<="z"||e.key>="A"&&e.key<="Z"||" "===e.key)&&this.txt_myname.element.text.length<=10&&(this.txt_myname.element.text+=e.key.toUpperCase()):"Backspace"===e.key&&this.onBtnDeletePress()}.bind(this))},Keyboard.prototype.update=function(e){},Keyboard.prototype.onBtnKeyPress=function(e){global_game_sound.play("key"),this.txt_myname.element.text.length<=10&&(this.txt_myname.element.text+=e.element.entity.tags.list()[0])},Keyboard.prototype.onBtnDeletePress=function(e){global_game_sound.play("key"),this.txt_myname.element.text=this.txt_myname.element.text.slice(0,-1)},Keyboard.prototype.onBtnOkPress=function(e){""!==this.txt_myname.element.text?(global_game_sound.play("ok"),global_game_player_name=this.txt_myname.element.text,this.welcome_screen.enabled=!0,this.entity.enabled=!1):global_game_sound.play("err")};var RandomRoleSwapper=pc.createScript("randomRoleSwapper");RandomRoleSwapper.attributes.add("designerMainTable",{type:"entity",title:"Mesa Principal Diseñador",description:"Entidad en la mesa principal de diseñador"}),RandomRoleSwapper.attributes.add("developerMainTable",{type:"entity",title:"Mesa Principal Desarrollador",description:"Entidad en la mesa principal de desarrollador"}),RandomRoleSwapper.attributes.add("producerMainTable",{type:"entity",title:"Mesa Principal Productor",description:"Entidad en la mesa principal de productor"}),RandomRoleSwapper.attributes.add("secondaryRoom",{type:"entity",title:"Sala Secundaria",description:"Entidad contenedor de personajes secundarios"}),RandomRoleSwapper.attributes.add("useTag",{type:"boolean",default:!0,title:"Usar Tag",description:"Si es true usa tags, si es false usa nombres"}),RandomRoleSwapper.attributes.add("designerIdentifier",{type:"string",default:"designer",title:"Identificador Diseñador"}),RandomRoleSwapper.attributes.add("developerIdentifier",{type:"string",default:"developer",title:"Identificador Desarrollador"}),RandomRoleSwapper.attributes.add("producerIdentifier",{type:"string",default:"producer",title:"Identificador Productor"}),RandomRoleSwapper.prototype.initialize=function(){this.mainTablePositions={designer:this.designerMainTable.getPosition().clone(),developer:this.developerMainTable.getPosition().clone(),producer:this.producerMainTable.getPosition().clone()},this.defaultEntities={designer:this.designerMainTable,developer:this.developerMainTable,producer:this.producerMainTable},this.selectedCharacters={designer:null,developer:null,producer:null},this.swapCharacters(),window.Globals&&(window.Globals.selectedDesigner=this.selectedCharacters.designer,window.Globals.selectedDeveloper=this.selectedCharacters.developer,window.Globals.selectedProducer=this.selectedCharacters.producer)},RandomRoleSwapper.prototype.swapCharacters=function(){var e=this.secondaryRoom.children,t=this.getCharactersByRole(e,this.designerIdentifier),i=this.getCharactersByRole(e,this.developerIdentifier),a=this.getCharactersByRole(e,this.producerIdentifier);t.push(this.defaultEntities.designer),i.push(this.defaultEntities.developer),a.push(this.defaultEntities.producer);var r=this.getRandomCharacter(t),o=this.getRandomCharacter(i),s=this.getRandomCharacter(a);this.selectedCharacters.designer=r,this.selectedCharacters.developer=o,this.selectedCharacters.producer=s;var d=this.getCharacterId(r),n=this.getCharacterId(o),l=this.getCharacterId(s);window.Globals&&(window.Globals.selectedDesigner=r,window.Globals.selectedDeveloper=o,window.Globals.selectedProducer=s,window.Globals.selectedDesignerId=d,window.Globals.selectedDeveloperId=n,window.Globals.selectedProducerId=l);var p=r.getPosition().clone(),c=o.getPosition().clone(),h=s.getPosition().clone();this.moveToMainTable(r,this.mainTablePositions.designer),this.moveToMainTable(o,this.mainTablePositions.developer),this.moveToMainTable(s,this.mainTablePositions.producer),r!==this.defaultEntities.designer&&(this.defaultEntities.designer.setPosition(p),this.defaultEntities.designer.parent!==this.secondaryRoom&&this.secondaryRoom.addChild(this.defaultEntities.designer)),o!==this.defaultEntities.developer&&(this.defaultEntities.developer.setPosition(c),this.defaultEntities.developer.parent!==this.secondaryRoom&&this.secondaryRoom.addChild(this.defaultEntities.developer)),s!==this.defaultEntities.producer&&(this.defaultEntities.producer.setPosition(h),this.defaultEntities.producer.parent!==this.secondaryRoom&&this.secondaryRoom.addChild(this.defaultEntities.producer)),this.moveOthersToSecondary(t,r),this.moveOthersToSecondary(i,o),this.moveOthersToSecondary(a,s)},RandomRoleSwapper.prototype.getCharactersByRole=function(e,t){for(var i=[],a=0;a<e.length;a++){var r=e[a];(this.useTag?r.tags.has(t):r.name.toLowerCase().includes(t.toLowerCase()))&&i.push(r)}return i},RandomRoleSwapper.prototype.getRandomCharacter=function(e){return 0===e.length?null:e[Math.floor(Math.random()*e.length)]},RandomRoleSwapper.prototype.moveToMainTable=function(e,t){e&&e.setPosition(t)},RandomRoleSwapper.prototype.moveOthersToSecondary=function(e,t){for(var i=0;i<e.length;i++){var a=e[i];a!==t&&a.parent!==this.secondaryRoom&&this.secondaryRoom.addChild(a)}},RandomRoleSwapper.prototype.getCharacterId=function(e){if(!e)return-1;var t=e.tags.list();if(t.length>1){var i=parseInt(t[1],10);if(!isNaN(i))return i}return-1},RandomRoleSwapper.prototype.shuffle=function(){this.swapCharacters()};var MailController=pc.createScript("mailController");MailController.attributes.add("mail_box",{type:"entity"}),MailController.attributes.add("btn_mail_ok",{type:"entity"}),MailController.prototype.initialize=function(){this.btn_mail_ok.element.on("mousedown",this.onBtnOkPress,this),this.btn_mail_ok.element.on("touchstart",this.onBtnOkPress,this),this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},MailController.prototype.update=function(t){},MailController.prototype.activeMail=function(t){t?(this.mail_box.enabled=!0,global_movement=!1):(global_game_sound.play("ok"),this.mail_box.enabled=!1,this.entity.enabled=!1,global_movement=!0)},MailController.prototype.onBtnOkPress=function(t){this.activeMail(!1)},MailController.prototype.onBtnMailPress=function(t){},MailController.prototype.onTriggerEnter=function(t){this.activeMail(!0)};var GameHistory=pc.createScript("gameHistory");GameHistory.attributes.add("step_test",{type:"number",default:0}),GameHistory.attributes.add("dialog_block_start",{type:"entity"}),GameHistory.attributes.add("dialog_block_end",{type:"entity"}),GameHistory.attributes.add("player",{type:"entity"}),GameHistory.attributes.add("message_box",{type:"entity"}),GameHistory.attributes.add("btn_ok",{type:"entity"}),GameHistory.attributes.add("mail_box",{type:"entity"}),GameHistory.attributes.add("btn_mail_ok",{type:"entity"}),GameHistory.attributes.add("score",{type:"entity"}),GameHistory.attributes.add("blocks_dialogs",{type:"entity",array:!0}),GameHistory.attributes.add("speak_signs",{type:"entity",array:!0}),GameHistory.attributes.add("blocks_minigames",{type:"entity",array:!0}),GameHistory.attributes.add("body_npc_solic",{type:"entity",array:!0}),GameHistory.attributes.add("npc_recepcionist",{type:"entity"}),GameHistory.attributes.add("npc_boss",{type:"entity"}),GameHistory.attributes.add("photo_usermail",{type:"entity"}),GameHistory.attributes.add("ed_mail",{type:"entity"}),GameHistory.attributes.add("count_act",{type:"entity"}),GameHistory.attributes.add("photo",{type:"entity"}),GameHistory.attributes.add("items",{type:"entity",array:!0}),GameHistory.attributes.add("list_photos_npc",{type:"asset",array:!0,assetType:"texture"}),GameHistory.attributes.add("list_photos_producers",{type:"asset",array:!0,assetType:"texture"}),GameHistory.attributes.add("list_photos_designers",{type:"asset",array:!0,assetType:"texture"}),GameHistory.attributes.add("list_photos_developers",{type:"asset",array:!0,assetType:"texture"}),GameHistory.attributes.add("list_photos_players",{type:"asset",array:!0,assetType:"texture"}),GameHistory.attributes.add("list_monitor_screens",{type:"entity",array:!0}),GameHistory.attributes.add("player_photo_teams",{type:"entity"}),GameHistory.attributes.add("player_sprite_teams",{type:"entity"}),GameHistory.attributes.add("call_text",{type:"entity"}),GameHistory.attributes.add("list_monitors",{type:"entity",array:!0}),GameHistory.prototype.initialize=function(){this.btn_ok.element.on("mousedown",this.onBtnOkPress,this),this.btn_mail_ok.element.on("mousedown",this.onBtnMailOkPress,this),this.btn_ok.element.on("touchstart",this.onBtnOkPress,this),this.btn_mail_ok.element.on("touchstart",this.onBtnMailOkPress,this),global_movement=!1,global_game_step=0,global_game_activity=0,global_game_status_dialog=!1,global_player_enter=!1,this.count_act.element.text=global_game_activity,this.score.enabled=!1,this.dialog_block_start.enabled=!0,this.dialog_block_end.enabled=!1,this.mail_box.enabled=!1,this.npc_recepcionist.children[1].enabled=!1,this.npc_boss.children[1].enabled=!1,window.Globals.selectedProducer.children[1].enabled=!1,item_guion=this.items[0],dlg_recepcionista=this.blocks_dialogs[0],dlg_solicitante_recepcion=this.blocks_dialogs[1],dlg_puerta_coordinador=this.blocks_dialogs[2],dlg_coordinador=this.blocks_dialogs[3],dlg_solicitante_coordinador=this.blocks_dialogs[4],dlg_puerta_productor=this.blocks_dialogs[5],dlg_productor_academico=this.blocks_dialogs[6],dlg_solicitante_productor=this.blocks_dialogs[7],dlg_call_solicitante=this.blocks_dialogs[8],dlg_call_productor=this.blocks_dialogs[9],dlg_puerta_produccion=this.blocks_dialogs[10],dlg_produccion=this.blocks_dialogs[11],dlg_disenio_produccion=this.blocks_dialogs[12],dlg_desarrollo_produccion=this.blocks_dialogs[13],dlg_productor_reunion=this.blocks_dialogs[14],dlg_solicitante_reunion=this.blocks_dialogs[15],dlg_endgame=this.blocks_dialogs[16],npc_productor=window.Globals.selectedProducer,npc_solicitante=this.body_npc_solic[0],npc_solicitante_meet=this.body_npc_solic[1],npc_solicitante_sit=this.body_npc_solic[2],photo_coordinador=this.list_photos_npc[0].resource,photo_recepcionista=this.list_photos_npc[1].resource,photo_productor=this.list_photos_producers[window.Globals.selectedProducerId].resource,photo_disenador=this.list_photos_designers[window.Globals.selectedDesignerId].resource,photo_desarrollador=this.list_photos_developers[window.Globals.selectedDeveloperId].resource,global_photo_boss=photo_coordinador.name,global_photo_producer=photo_productor.name,global_photo_designer=photo_disenador.name,global_photo_developer=photo_desarrollador.name,ss_recepcionista=this.speak_signs[0],ss_puerta_coordinador=this.speak_signs[1],ss_coordinador=this.speak_signs[2],ss_puerta_productor=this.speak_signs[3],ss_productor_academico=this.speak_signs[4],ss_llamada=this.speak_signs[5],ss_puerta_produccion=this.speak_signs[6],ss_produccion=this.speak_signs[7],ss_reunion_final=this.speak_signs[8],mg_minigame1=this.blocks_minigames[0],mg_minigame2=this.blocks_minigames[1],mg_minigame3=this.blocks_minigames[2],mg_minigame4=this.blocks_minigames[3],mg_minigame5=this.blocks_minigames[4],monitor1=this.list_monitors[0],monitor2=this.list_monitors[1],this.controlSteps(),global_game_step++},GameHistory.prototype.update=function(e){global_game_status_dialog=this.message_box.enabled,this.count_act.element.text=global_game_activity,global_game_step>1&&(this.score.enabled=!0),global_mini_game_completed&&(this.controlSteps(),global_game_step++,global_mini_game_completed=!1),this.step_test>=global_game_step&&(global_game_step=this.step_test,this.controlSteps(),global_game_step++,console.log("Global Step updated to: "+global_game_step))},GameHistory.prototype.onBtnOkPress=function(e){if(global_game_sound.play("ok_d"),this.btn_ok){var o=this.btn_ok;o.enabled=!1;setTimeout((function(){o.enabled=!0}),500)}global_movement=!0,this.message_box.enabled=!1,this.controlSteps(),global_game_step++},GameHistory.prototype.onBtnMailOkPress=function(e){this.controlSteps(),global_game_step++},GameHistory.prototype.controlSteps=function(){switch(photo_jugador=this.list_photos_players[global_player_gender].resource,this.photo_usermail.element.texture=photo_jugador,this.player_photo_teams.element.texture=photo_jugador,this.call_text.element.text="Llamando a "+global_game_player_name,global_game_step){case 0:dlg_recepcionista.enabled=!0,ss_recepcionista.enabled=!0,this.photo.element.texture=photo_recepcionista;break;case 1:dlg_recepcionista.enabled=!1,ss_recepcionista.enabled=!1,dlg_solicitante_recepcion.enabled=!0,this.photo.element.texture=photo_jugador;break;case 2:dlg_solicitante_recepcion.enabled=!1,dlg_recepcionista.script.dialogs.current_dialog=1,dlg_recepcionista.enabled=!0,this.photo.element.texture=photo_recepcionista;break;case 3:dlg_recepcionista.enabled=!1,dlg_solicitante_recepcion.enabled=!1,dlg_puerta_coordinador.enabled=!0,ss_puerta_coordinador.enabled=!0,this.photo.element.texture=photo_jugador;break;case 4:dlg_puerta_coordinador.enabled=!1,ss_puerta_coordinador.enabled=!1,dlg_coordinador.enabled=!0,ss_coordinador.enabled=!0,this.photo.element.texture=photo_coordinador,this.npc_recepcionist.children[1].enabled=!0;break;case 5:dlg_coordinador.enabled=!1,ss_coordinador.enabled=!1,dlg_solicitante_coordinador.enabled=!0,this.photo.element.texture=photo_jugador;break;case 6:dlg_solicitante_coordinador.enabled=!1,dlg_coordinador.script.dialogs.current_dialog=1,dlg_coordinador.enabled=!0,this.photo.element.texture=photo_coordinador;break;case 7:dlg_coordinador.enabled=!1,ss_coordinador.enabled=!1,mg_minigame1.enabled=!0;break;case 8:global_mini_game_completed&&(dlg_solicitante_coordinador.script.dialogs.current_dialog=1,dlg_solicitante_coordinador.enabled=!0,this.photo.element.texture=photo_jugador,global_game_activity++);break;case 9:dlg_solicitante_coordinador.enabled=!1,ss_coordinador.enabled=!1,dlg_coordinador.script.dialogs.current_dialog=2,dlg_coordinador.enabled=!0,this.photo.element.texture=photo_coordinador,mg_minigame1.enabled=!1;break;case 10:dlg_coordinador.enabled=!1,ss_coordinador.enabled=!1,dlg_puerta_productor.enabled=!0,ss_puerta_productor.enabled=!0,this.photo.element.texture=photo_jugador;break;case 11:dlg_puerta_productor.enabled=!1,ss_puerta_productor.enabled=!1,dlg_productor_academico.enabled=!0,ss_productor_academico.enabled=!0,this.photo.element.texture=photo_productor,this.npc_boss.children[1].enabled=!0;break;case 12:dlg_productor_academico.enabled=!1,ss_productor_academico.enabled=!1,mg_minigame2.enabled=!0;break;case 13:global_mini_game_completed&&(dlg_productor_academico.script.dialogs.current_dialog=1,dlg_productor_academico.enabled=!0,this.photo.element.texture=photo_productor,global_game_activity++);break;case 14:dlg_productor_academico.enabled=!1,npc_productor.enabled=!1,global_current_body=window.Globals.selectedProducerId+2,dlg_solicitante_productor.enabled=!0,npc_solicitante.enabled=!0,npc_solicitante.children[global_player_gender].enabled=!0,this.photo.element.texture=photo_jugador,mg_minigame2.enabled=!1;break;case 15:dlg_solicitante_productor.enabled=!1,npc_solicitante.children[global_player_gender].sprite.play("walkLeft",.2),this.photo.element.texture=photo_productor,dlg_productor_academico.script.dialogs.current_dialog=2,dlg_productor_academico.enabled=!0;break;case 16:dlg_productor_academico.enabled=!1,ss_productor_academico.enabled=!1,mg_minigame3.enabled=!0;break;case 17:global_mini_game_completed&&(dlg_productor_academico.script.dialogs.current_dialog=3,dlg_productor_academico.enabled=!0,this.photo.element.texture=photo_productor,global_game_sound.play("teams_call"),this.list_monitor_screens[0].enabled=!1,this.list_monitor_screens[1].enabled=!0,global_game_activity++);break;case 18:dlg_productor_academico.enabled=!1,global_game_sound.pause("teams_call"),this.player_sprite_teams.children[global_player_gender].enabled=!0,this.list_monitor_screens[1].enabled=!1,this.list_monitor_screens[2].enabled=!0,dlg_call_solicitante.enabled=!0,ss_llamada.enabled=!0,this.photo.element.texture=photo_jugador,mg_minigame3.enabled=!1;break;case 19:dlg_call_solicitante.enabled=!1,ss_llamada.enabled=!1,dlg_call_productor.enabled=!0,this.photo.element.texture=photo_productor;break;case 20:this.list_monitor_screens[2].enabled=!1,this.list_monitor_screens[0].enabled=!0,dlg_call_productor.enabled=!1,this.ed_mail.enabled=!0,ss_productor_academico.enabled=!0,global_game_sound.play("mail");break;case 21:dlg_productor_academico.script.dialogs.current_dialog=4,dlg_productor_academico.enabled=!0,this.photo.element.texture=photo_productor,item_guion.enabled=!0,ss_productor_academico.enabled=!1;break;case 22:dlg_productor_academico.enabled=!1,dlg_puerta_produccion.enabled=!0,ss_puerta_produccion.enabled=!0;break;case 23:dlg_puerta_produccion.enabled=!1,ss_puerta_produccion.enabled=!1,dlg_produccion.enabled=!0,ss_produccion.enabled=!0;break;case 24:dlg_produccion.enabled=!1,ss_produccion.enabled=!1,dlg_disenio_produccion.enabled=!0,this.photo.element.texture=photo_disenador,item_guion.enabled=!1,monitor1.enabled=!1;break;case 25:dlg_disenio_produccion.enabled=!1,mg_minigame4.enabled=!0;break;case 26:global_mini_game_completed&&(dlg_disenio_produccion.script.dialogs.current_dialog=1,dlg_disenio_produccion.enabled=!0,this.photo.element.texture=photo_disenador,global_game_activity++);break;case 27:dlg_disenio_produccion.enabled=!1,dlg_produccion.script.dialogs.current_dialog=1,dlg_produccion.enabled=!0,this.photo.element.texture=photo_productor,mg_minigame4.enabled=!1;break;case 28:dlg_produccion.enabled=!1,dlg_desarrollo_produccion.enabled=!0,this.photo.element.texture=photo_desarrollador;break;case 29:dlg_desarrollo_produccion.enabled=!1,mg_minigame5.enabled=!0;break;case 30:global_mini_game_completed&&(dlg_desarrollo_produccion.script.dialogs.current_dialog=1,dlg_desarrollo_produccion.enabled=!0,this.photo.element.texture=photo_desarrollador,global_game_activity++);break;case 31:dlg_desarrollo_produccion.enabled=!1,dlg_produccion.script.dialogs.current_dialog=2,dlg_produccion.enabled=!0,this.photo.element.texture=photo_productor,npc_solicitante_meet.enabled=!0,npc_solicitante_meet.children[global_player_gender].enabled=!0,npc_solicitante_sit.children[global_player_gender].enabled=!0,mg_minigame5.enabled=!1;break;case 32:dlg_produccion.enabled=!1,ss_reunion_final.enabled=!0,dlg_productor_reunion.enabled=!0,this.photo.element.texture=photo_productor;break;case 33:dlg_productor_reunion.enabled=!1,dlg_solicitante_reunion.enabled=!0,this.photo.element.texture=photo_jugador;break;case 34:dlg_solicitante_reunion.enabled=!1,ss_reunion_final.enabled=!1,dlg_productor_reunion.script.dialogs.current_dialog=1,dlg_productor_reunion.enabled=!0,this.photo.element.texture=photo_productor;break;case 35:dlg_productor_reunion.enabled=!1,dlg_solicitante_reunion.script.dialogs.current_dialog=1,dlg_solicitante_reunion.enabled=!0,this.photo.element.texture=photo_jugador;break;case 36:dlg_solicitante_reunion.enabled=!1,dlg_productor_reunion.script.dialogs.current_dialog=2,dlg_productor_reunion.enabled=!0,this.photo.element.texture=photo_productor;break;case 37:dlg_productor_reunion.enabled=!1,dlg_solicitante_reunion.script.dialogs.current_dialog=2,dlg_solicitante_reunion.enabled=!0,this.photo.element.texture=photo_jugador;break;case 38:dlg_solicitante_reunion.enabled=!1,dlg_endgame.enabled=!0,monitor2.enabled=!1,npc_solicitante_sit.enabled=!1,npc_productor.enabled=!0,global_current_body=global_player_gender,global_game_sound.play("final_win"),global_game_activity++;break;case 39:dlg_endgame.enabled=!1,window.Globals.selectedProducer.children[1].enabled=!0,this.dialog_block_end.enabled=!0}global_photo_history=this.photo.element.texture};var DialogsScreen=pc.createScript("dialogsScreen");DialogsScreen.attributes.add("data_source",{type:"asset",array:!1,assetType:"json"}),DialogsScreen.prototype.initialize=function(){this.entity.element.text=this.sentence("_WELCOME").text.replace("@welcome",this.sentence("_GENDER")[global_player_gender].welcome).replace("@player_name",global_game_player_name)},DialogsScreen.prototype.update=function(e){},DialogsScreen.prototype.sentence=function(e){return this.data_source.resource.data.find((t=>t.level===e.toString()))};var Dialogs=pc.createScript("dialogs");function randomInRange(t,e){return Math.floor(Math.random()*(e-t+1))+t}Dialogs.attributes.add("message_box",{type:"entity"}),Dialogs.attributes.add("title",{type:"entity"}),Dialogs.attributes.add("title_bar",{type:"entity"}),Dialogs.attributes.add("phrase",{type:"entity"}),Dialogs.attributes.add("photo",{type:"entity"}),Dialogs.attributes.add("player",{type:"entity"}),Dialogs.attributes.add("btn_ok",{type:"entity"}),Dialogs.attributes.add("data_source",{type:"asset",array:!1,assetType:"json"}),Dialogs.attributes.add("dialogs",{type:"number",array:!0}),Dialogs.attributes.add("current_dialog",{type:"number",default:0}),Dialogs.attributes.add("is_npc",{type:"boolean",default:!1}),Dialogs.attributes.add("is_info",{type:"boolean",default:!1}),Dialogs.attributes.add("is_once",{type:"boolean",default:!1}),Dialogs.attributes.add("is_box_animated",{type:"boolean",default:!1}),Dialogs.attributes.add("info_index",{type:"number",default:0}),Dialogs.attributes.add("image",{type:"asset",assetType:"texture"}),Dialogs.attributes.add("list_attributes",{type:"string",array:!0}),Dialogs.attributes.add("char_delay",{type:"number",default:.03}),Dialogs.attributes.add("icon",{type:"entity"}),Dialogs.attributes.add("icon_texture",{type:"asset",assetType:"texture"}),Dialogs.attributes.add("tail",{type:"entity"}),Dialogs.prototype.initialize=function(){this.message_box.enabled=!1,this.entity.collision.on("triggerenter",this.onTriggerEnter,this),this.entity.collision.on("triggerleave",this.onTriggerLeave,this),this.textElement=this.phrase.element,this.textAnimationTimer=0,this.charDelay=this.char_delay,this.isAnimating=!1,this.charIndex=0,this.displayedChars=0,this.currentText=""},Dialogs.prototype.update=function(t){this.animateText(t),this.animatePhoto(t),this.is_box_animated&&this.animateMessageBox(t)},Dialogs.prototype.getBannerTextByIndex=function(t){const e=this.sentence("_BANNERS").texts;return Array.isArray(e)&&t>=0&&t<e.length?e[t]:""},Dialogs.prototype.sentence=function(t){return this.data_source.resource.data.find((e=>e.level===t.toString()))},Dialogs.prototype.applyReplacements=function(t,e){return Object.entries(e).reduce(((t,[e,i])=>t.replace(new RegExp(e,"g"),i)),t)},Dialogs.prototype.resetTextAnimation=function(){this.textElement.text="",this.currentText="",this.charIndex=0,this.displayedChars=0,this.textAnimationTimer=0},Dialogs.prototype.getRandomDialogText=function(){const t=this.sentence("_NPC_DIALOGS").texts,e=this.entity.parent?.tags?.list()[0]||null;let i=t.any;return e&&t[e]?.length>0&&(i=Math.random()<.5?t[e]:t.any),i[randomInRange(0,i.length-1)]},Dialogs.prototype.onTriggerEnter=function(t){if(this.player.rigidbody){if(this.is_box_animated?this.message_box.setLocalPosition(0,880,0):this.message_box.setLocalPosition(0,145,0),this.photo.setLocalPosition(0,-200,0),global_game_sound.play("chat"),this.resetTextAnimation(),this.is_npc||this.is_info){if(global_dialog_active)return;global_dialog_active=!0,this.handleNpcDialog()}else this.handleStoryDialog();this.message_box.enabled=!0,this.isAnimating=!0}},Dialogs.prototype.onTriggerLeave=function(t){(this.is_info||this.is_npc)&&(this.message_box.enabled=!1,global_movement=!0,global_dialog_active=!1),this.resetTextAnimation(),this.is_once&&(this.entity.enabled=!1),this.message_box.setLocalPosition(0,145,0)},Dialogs.prototype.handleNpcDialog=function(){if(global_movement=!0,this.btn_ok.enabled=!1,this.icon.enabled=!0,this.textElement.text="",this.currentText="",this.charIndex=0,this.displayedChars=0,this.textAnimationTimer=0,this.title.element.text="",this.icon.element.texture=this.icon_texture.resource,this.is_info){var t=this.info_index;this.currentText=this.getBannerTextByIndex(t),this.photo.enabled=!1,this.title.enabled=!1,this.title_bar.enabled=!1,this.tail.enabled=!1}else this.currentText=this.getRandomDialogText(),this.title.element.text=this.list_attributes[0]+" - "+this.list_attributes[1],this.photo.element.texture=this.image.resource,this.photo.enabled=!0,this.title.enabled=!0,this.title_bar.enabled=!0,this.title_bar.element.color=new pc.Color(32/255,32/255,32/255),this.tail.enabled=!0},Dialogs.prototype.handleStoryDialog=function(){const t=this.sentence("_GENDER")[global_player_gender.toString()];this.textElement.text="",this.currentText="",this.charIndex=0,this.displayedChars=0,this.textAnimationTimer=0;const e={"@player_title":t.role,"@player_name":global_game_player_name,"@producer_name":this.sentence("_PRODUCERS").name[window.Globals.selectedProducerId],"@designer_name":this.sentence("_DESIGNERS").name[window.Globals.selectedDesignerId],"@developer_name":this.sentence("_DEVELOPERS").name[window.Globals.selectedDeveloperId],"@welcome":t.welcome,"@_lo_la":t._lo_la,"@_o_a":t._o_a,"@_a":t._a,"@_el_la":t._el_la},i=this.sentence(this.dialogs[this.current_dialog]);if(this.title.element.text=this.applyReplacements(i.title,e),this.currentText=this.applyReplacements(i.text,e),this.photo.element.texture=global_photo_history,this.photo.enabled=!0,this.title.enabled=!0,this.title_bar.enabled=!0,this.title_bar.element.color=new pc.Color(19/255,.2,147/255),this.icon.enabled=!1,this.tail.enabled=!0,this.btn_ok){var a=this.btn_ok;a.enabled=!1;setTimeout((function(){a.enabled=!0}),500)}global_movement=!1},Dialogs.prototype.animateText=function(t){if(this.isAnimating&&this.currentText&&!(this.displayedChars>=this.currentText.length))for(this.textAnimationTimer+=t;this.textAnimationTimer>=this.charDelay&&this.displayedChars<this.currentText.length;){const t=this.currentText.charAt(this.displayedChars);if(t&&1===t.length?(this.textElement.text+=t,this.displayedChars++,this.textAnimationTimer-=this.charDelay,".,!?".includes(t)&&(this.textAnimationTimer-=3*this.charDelay)):this.displayedChars++,this.displayedChars>=this.currentText.length){this.isAnimating=!1;break}}},Dialogs.prototype.animatePhoto=function(t){this.photo.getLocalPosition().y<-30?this.photo.translate(0,.2*t,0):this.photo.setLocalPosition(0,-30,0)},Dialogs.prototype.animateMessageBox=function(t){this.message_box.getLocalPosition().y>610?this.message_box.translate(0,-3*t,0):this.message_box.setLocalPosition(0,610,0)};var pos_player,posZ_cam,CameraTarget=pc.createScript("cameraTarget");CameraTarget.attributes.add("player",{type:"entity"}),CameraTarget.prototype.initialize=function(){posY_cam=this.entity.getPosition().y,posZ_cam=this.entity.getPosition().z},CameraTarget.prototype.update=function(t){this.player&&(pos_player=this.player.getPosition(),this.entity.setPosition(pos_player.x,posY_cam,pos_player.z+posZ_cam))};var PlayerController=pc.createScript("playerController");PlayerController.attributes.add("speed",{type:"number",default:.15}),PlayerController.attributes.add("spriteBody",{type:"entity",array:!0});var deltaTime,directionActive,force=new pc.Vec3;PlayerController.prototype.initialize=function(){pc.platform.mobile&&(this.speed=.075)},PlayerController.prototype.update=function(e){if(global_movement){deltaTime=e;var t=0,r=0;if((this.app.keyboard.isPressed(pc.KEY_A)||this.app.keyboard.isPressed(pc.KEY_LEFT)||btn_left_pressed)&&(this.rotatePlayer(-90),directionActive=!0),(this.app.keyboard.isPressed(pc.KEY_D)||this.app.keyboard.isPressed(pc.KEY_RIGHT)||btn_right_pressed)&&(this.rotatePlayer(90),directionActive=!0),(this.app.keyboard.isPressed(pc.KEY_W)||this.app.keyboard.isPressed(pc.KEY_UP)||btn_up_pressed)&&(this.rotatePlayer(180),directionActive=!0),(this.app.keyboard.isPressed(pc.KEY_S)||this.app.keyboard.isPressed(pc.KEY_DOWN)||btn_down_pressed)&&(this.rotatePlayer(0),directionActive=!0),directionActive){var i=this.entity.forward;t-=i.x,r-=i.z}var s=directionActive;if(directionActive=!1,0!==t||0!==r){var a=new pc.Vec3(t,0,r).normalize().scale(this.speed/deltaTime);this.entity.rigidbody.linearVelocity=new pc.Vec3(a.x,0,a.z)}else this.entity.rigidbody.linearVelocity=new pc.Vec3(0,0,0);if(s)var o=this.entity.getEulerAngles().y;this.spriteBody.forEach(((e,t)=>{e.enabled=t===global_current_body})),this.spriteBody[global_current_body].setEulerAngles(new pc.Vec3(0,o,0))}},PlayerController.prototype.rotatePlayer=function(e){var t=new pc.Vec3(0,e,0);this.entity.setEulerAngles(t)};var action,PlayerAnimation=pc.createScript("playerAnimation");PlayerAnimation.attributes.add("btn_up",{type:"entity"}),PlayerAnimation.attributes.add("btn_down",{type:"entity"}),PlayerAnimation.attributes.add("btn_left",{type:"entity"}),PlayerAnimation.attributes.add("btn_right",{type:"entity"}),PlayerAnimation.attributes.add("spriteBody",{type:"entity",array:!0});var btn_up_pressed=!1,btn_down_pressed=!1,btn_left_pressed=!1,btn_right_pressed=!1;PlayerAnimation.prototype.initialize=function(){this.app.keyboard.on(pc.EVENT_KEYDOWN,this.keyChange,this),this.app.keyboard.on(pc.EVENT_KEYUP,this.keyChange,this),this.btn_up.element.on("mousedown",this.onBtnUpPress,this),this.btn_up.element.on("mouseup",this.onBtnUpRelease,this),this.btn_down.element.on("mousedown",this.onBtnDownPress,this),this.btn_down.element.on("mouseup",this.onBtnDownRelease,this),this.btn_left.element.on("mousedown",this.onBtnLeftPress,this),this.btn_left.element.on("mouseup",this.onBtnLeftRelease,this),this.btn_right.element.on("mousedown",this.onBtnRightPress,this),this.btn_right.element.on("mouseup",this.onBtnRightRelease,this),this.btn_up.element.on("touchstart",this.onBtnUpPress,this),this.btn_up.element.on("touchend",this.onBtnUpRelease,this),this.btn_down.element.on("touchstart",this.onBtnDownPress,this),this.btn_down.element.on("touchend",this.onBtnDownRelease,this),this.btn_left.element.on("touchstart",this.onBtnLeftPress,this),this.btn_left.element.on("touchend",this.onBtnLeftRelease,this),this.btn_right.element.on("touchstart",this.onBtnRightPress,this),this.btn_right.element.on("touchend",this.onBtnRightRelease,this),this.setState("idleFront"),this.entity.sound.slot("step").volume=0,this.entity.sound.play("step")},PlayerAnimation.prototype.update=function(t){},PlayerAnimation.prototype.checkButtons=function(){action=this.app.keyboard.isPressed(pc.KEY_A)||this.app.keyboard.isPressed(pc.KEY_LEFT)?"walkLeft":this.app.keyboard.isPressed(pc.KEY_D)||this.app.keyboard.isPressed(pc.KEY_RIGHT)?"walkRight":this.app.keyboard.isPressed(pc.KEY_W)||this.app.keyboard.isPressed(pc.KEY_UP)?"walkUp":this.app.keyboard.isPressed(pc.KEY_S)||this.app.keyboard.isPressed(pc.KEY_DOWN)?"walkDown":"idleFront"},PlayerAnimation.prototype.keyChange=function(t){if(global_movement){var e=action;this.checkButtons(),e!==action&&this.setState(action)}else this.entity.sound.slot("step").volume=0,action="idleFront",this.setState(action)},PlayerAnimation.prototype.setState=function(t){this.state=t,t.includes("walk")?this.entity.sound.slot("step").volume=.5:this.entity.sound.slot("step").volume=0,this.spriteBody[global_current_body].sprite.play(t,.2)},PlayerAnimation.prototype.onBtnUpPress=function(t){action="walkUp",this.setState(action),btn_up_pressed=!0},PlayerAnimation.prototype.onBtnUpRelease=function(t){action="idleFront",this.setState(action),btn_up_pressed=!1},PlayerAnimation.prototype.onBtnDownPress=function(t){action="walkDown",this.setState(action),btn_down_pressed=!0},PlayerAnimation.prototype.onBtnDownRelease=function(t){action="idleFront",this.setState(action),btn_down_pressed=!1},PlayerAnimation.prototype.onBtnLeftPress=function(t){action="walkLeft",this.setState(action),btn_left_pressed=!0},PlayerAnimation.prototype.onBtnLeftRelease=function(t){action="idleFront",this.setState(action),btn_left_pressed=!1},PlayerAnimation.prototype.onBtnRightPress=function(t){action="walkRight",this.setState(action),btn_right_pressed=!0},PlayerAnimation.prototype.onBtnRightRelease=function(t){action="idleFront",this.setState(action),btn_right_pressed=!1};var BounceAnimation=pc.createScript("bounceAnimation");BounceAnimation.attributes.add("init_posY",{type:"number",default:0}),BounceAnimation.attributes.add("speed",{type:"number",default:0}),BounceAnimation.attributes.add("temp_speed",{type:"number",default:0}),BounceAnimation.attributes.add("rango",{type:"number",default:0}),BounceAnimation.prototype.initialize=function(){this.temp_speed=this.speed,this.init_posY=this.entity.getLocalPosition().y},BounceAnimation.prototype.update=function(t){this.entity.getLocalPosition().y>=this.init_posY+this.rango&&(this.temp_speed=-this.speed),this.entity.getLocalPosition().y<=this.init_posY-this.rango&&(this.temp_speed=this.speed),this.entity.translate(0,this.temp_speed*t,0)};var Rotate=pc.createScript("rotate"),speed=new pc.Vec3(0,90,0);Rotate.prototype.initialize=function(){},Rotate.prototype.update=function(t){this.entity.rotate(speed.x*t,speed.y*t,speed.z*t)};var DoorAnimation=pc.createScript("doorAnimation");DoorAnimation.attributes.add("collider",{type:"entity"}),DoorAnimation.attributes.add("speed",{type:"number",default:0}),DoorAnimation.attributes.add("step",{type:"number",default:0}),DoorAnimation.attributes.add("width",{type:"number",default:0}),DoorAnimation.attributes.add("is_horizontal",{type:"boolean",default:!0}),DoorAnimation.attributes.add("with_sound",{type:"boolean",default:!0}),DoorAnimation.prototype.initialize=function(){this.init_posX=this.entity.getLocalPosition().x,this.init_posZ=this.entity.getLocalPosition().z,this.soundPlayed=!1},DoorAnimation.prototype.update=function(t){this.step===global_game_step&&(this.is_horizontal?(this.entity.getLocalPosition().x>=this.init_posX-this.width&&this.entity.translate(this.speed*t,0,0),this.entity.getLocalPosition().x<=this.init_posX-this.width/2&&this.collider.rigidbody.teleport(this.init_posX-this.width,this.collider.getPosition().y,this.collider.getPosition().z)):(this.entity.getLocalPosition().z>=this.init_posZ-this.width&&this.entity.translate(0,0,this.speed*t),this.entity.getLocalPosition().z<=this.init_posZ-this.width/2&&this.collider.rigidbody.teleport(this.collider.getPosition().x,this.collider.getPosition().y,this.init_posZ-this.width)),!this.soundPlayed&&this.with_sound&&(global_game_sound.play("open"),this.soundPlayed=!0))};var Options=pc.createScript("options");Options.attributes.add("btn_pause",{type:"entity"}),Options.attributes.add("btn_fullscreen",{type:"entity"}),Options.attributes.add("btn_credits",{type:"entity"}),Options.attributes.add("btn_restart",{type:"entity"}),Options.attributes.add("btn_exit",{type:"entity"}),Options.attributes.add("screen_pause",{type:"entity"}),Options.attributes.add("btn_continue",{type:"entity"}),Options.attributes.add("touch_controls",{type:"entity"}),Options.attributes.add("message_box",{type:"entity"}),Options.attributes.add("mail_box",{type:"entity"}),Options.attributes.add("score",{type:"entity"}),Options.attributes.add("credits",{type:"asset",assetType:"html"}),Options.prototype.initialize=function(){global_game_pause=!1,this.btn_pause.element.on("mousedown",this.onBtnPausePress,this),this.btn_continue.element.on("mousedown",this.onBtnPausePress,this),this.btn_fullscreen.element.on("mousedown",this.onBtnFullScreenPress,this),this.btn_credits.element.on("mousedown",this.onBtnCreditsPress,this),this.btn_restart.element.on("mousedown",this.onBtnRestartPress,this),this.btn_exit.element.on("mousedown",this.onBtnExitPress,this),this.btn_pause.element.on("touchstart",this.onBtnPausePress,this),this.btn_continue.element.on("touchstart",this.onBtnPausePress,this),this.btn_fullscreen.element.on("touchstart",this.onBtnFullScreenPress,this),this.btn_credits.element.on("touchstart",this.onBtnCreditsPress,this),this.btn_restart.element.on("touchstart",this.onBtnRestartPress,this),this.btn_exit.element.on("touchstart",this.onBtnExitPress,this),this.createModalCredits(),this.screen_pause.enabled=!1},Options.prototype.update=function(t){this.message_box.enabled||this.mail_box.enabled?this.btn_pause.enabled=!1:this.btn_pause.enabled=!0,this.message_box.enabled&&!global_movement||this.mail_box.enabled?this.touch_controls.enabled=!1:pc.platform.mobile&&!global_game_pause&&global_movement&&(this.touch_controls.enabled=!0)},Options.prototype.onBtnPausePress=function(t){global_game_sound.play("button"),global_game_pause=!global_game_pause,global_game_pause?(global_movement=!1,global_game_sound.volume=0,global_game_sound.pause("main"),this.app.timeScale=0,this.screen_pause.enabled=!0,this.touch_controls.enabled=!1,this.score.enabled=!1):(global_movement=!0,global_game_sound.volume=1,global_game_sound.play("main"),this.app.timeScale=1,this.screen_pause.enabled=!1,global_game_step>1&&(this.score.enabled=!0),pc.platform.mobile&&(this.touch_controls.enabled=!0))},Options.prototype.onBtnFullScreenPress=function(t){global_game_sound.play("button"),document.fullscreenElement||document.documentElement.requestFullscreen()},Options.prototype.onBtnRestartPress=function(t){global_game_sound.play("button"),window.location.reload()},Options.prototype.onBtnExitPress=function(t){document.exitFullscreen(),setTimeout((function(){setTimeout((function(){window.open("https://multimedia.uned.ac.cr/","_blank").focus()}),1e3)}),100)},Options.prototype.onBtnCreditsPress=function(t){global_game_sound.play("button"),document.getElementById("modal_credits").classList.remove("hidden"),document.getElementById("modal_credits").style.display="block"},Options.prototype.onBtnCloseCreditsPress=function(t){global_game_sound.play("close_dialog"),document.getElementById("modal_credits").classList.add("hidden"),document.getElementById("modal_credits").style.display="none"},Options.prototype.createModalCredits=function(){var t=document.createElement("div");t.innerHTML=this.credits.resource||"",t.querySelector("#btn_close").addEventListener("click",this.onBtnCloseCreditsPress.bind(this)),document.body.appendChild(t)};var MiniGameModal=pc.createScript("miniGameModal");MiniGameModal.attributes.add("player",{type:"entity"}),MiniGameModal.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),MiniGameModal.attributes.add("html",{type:"asset",assetType:"html",title:"HTML Asset"}),MiniGameModal.attributes.add("script_name",{type:"string",title:"Script Name"}),MiniGameModal.prototype.initialize=function(){this.uniqueId=this.script_name||"minigame-"+this.entity.getGuid(),this.styleId="minigame-modal-style-"+this.uniqueId,this.containerId="minigame-modal-container-"+this.uniqueId,this.modal=null,this.btn_close_modal=null,this.overlay=null,this.div=null,this.style=null,this.isLoaded=!1,this.entity.collision.on("triggerenter",this.onTriggerEnter,this),this.entity.collision.on("triggerleave",this.onTriggerLeave,this)},MiniGameModal.prototype.update=function(i){},MiniGameModal.prototype.loadMinigame=function(){try{this.cleanupMinigame(),console.log("Loading minigame: "+this.uniqueId),this.style=document.createElement("style"),this.style.type="text/css",this.style.id=this.styleId,document.head.appendChild(this.style),this.style.innerHTML=this.css.resource||"",this.div=document.createElement("div"),this.div.id=this.containerId,this.div.classList.add("container"),this.div.innerHTML=this.html.resource||"",document.body.appendChild(this.div);var i=this;this.html.on("load",(function(){i.div&&(i.div.innerHTML=i.html.resource)})),this.app.assets.load(this.html),this.modal=this.div.querySelector(".modal"),this.btn_close_modal=this.div.querySelector(".close-modal"),this.overlay=this.div.querySelector(".overlay"),this.btn_close_modal&&this.btn_close_modal.addEventListener("mousedown",this.toggleModal.bind(this)),this.overlay&&this.overlay.addEventListener("mousedown",this.toggleModal.bind(this)),this.script_name&&!this.entity.script[this.script_name]&&this.entity.script.create(this.script_name),this.isLoaded=!0,console.log("Minigame loaded successfully: "+this.uniqueId)}catch(i){console.error("Error loading minigame:",i)}},MiniGameModal.prototype.toggleModal=function(){try{this.modal&&(this.modal.classList.toggle("hidden"),global_movement?(global_game_sound.play("minigame"),global_game_sound.pause("main")):(global_game_sound.play("close_dialog"),global_game_sound.pause("minigame"),global_game_sound.play("main"))),this.overlay&&(this.overlay.classList.toggle("hidden"),global_overlay_gui=!this.overlay.classList.contains("hidden"),global_movement=!global_movement)}catch(i){console.error("Error toggling modal:",i)}},MiniGameModal.prototype.cleanupMinigame=function(){try{if(console.log("Cleaning up minigame: "+this.uniqueId),this.script_name&&this.entity.script[this.script_name]&&(this.entity.script[this.script_name].enabled=!1,this.entity.script.destroy(this.script_name)),this.style&&this.style.parentNode)this.style.parentNode.removeChild(this.style);else{var i=document.getElementById(this.styleId);i&&i.parentNode&&i.parentNode.removeChild(i)}if(this.div&&this.div.parentNode)this.div.parentNode.removeChild(this.div);else{var t=document.getElementById(this.containerId);t&&t.parentNode&&t.parentNode.removeChild(t)}this.style=null,this.div=null,this.modal=null,this.btn_close_modal=null,this.overlay=null,this.isLoaded=!1,console.log("Minigame cleaned up: "+this.uniqueId)}catch(i){console.error("Error cleaning up minigame:",i)}},MiniGameModal.prototype.onTriggerEnter=function(i){if(this.player.rigidbody)if(this.isLoaded||(this.loadMinigame(),global_game_sound.play("play")),pc.platform.mobile){var t=this;setTimeout((function(){t.toggleModal()}),500)}else this.toggleModal()},MiniGameModal.prototype.onTriggerLeave=function(i){global_mini_game_completed?this.entity.enabled=!1:this.cleanupMinigame()};var Path=pc.createScript("path");Path.attributes.add("pointA",{type:"entity",title:"Point A"}),Path.attributes.add("pointB",{type:"entity",title:"Point B"}),Path.attributes.add("duration",{type:"number",default:5,title:"Duration (Secs)"}),Path.attributes.add("loop",{type:"boolean",default:!1,title:"Loop"}),Path.attributes.add("waitTime",{type:"number",default:0,title:"Initial Wait Time (Secs)"}),Path.attributes.add("minWaitTime",{type:"number",default:15,title:"Min Wait Time (Secs)"}),Path.attributes.add("maxWaitTime",{type:"number",default:40,title:"Max Wait Time (Secs)"}),Path.attributes.add("step",{type:"number",default:0,title:"Game Step"}),Path.attributes.add("hide",{type:"boolean",default:!1,title:"Hide Entity"}),Path.attributes.add("finalShowEntity",{type:"entity",title:"Show an extra Entity at End"}),Path.attributes.add("finalHideEntity",{type:"entity",title:"Hide an extra Entity at End"}),Path.prototype.initialize=function(){this.time=0;var t=this.entity.getPosition();t.copy(this.pointA.getPosition()),this.entity.setPosition(t)},Path.prototype.update=function(t){if(this.step<=global_game_step){if(this.waitTime>0)return void(this.waitTime-=t);if(this.loop&&(this.time=this.time%this.duration),this.time+=t,this.time<this.duration){var i=this.time/this.duration,e=this.entity.getPosition();e.lerp(this.pointA.getPosition(),this.pointB.getPosition(),i),this.entity.setPosition(e)}else this.waitTime=Math.random()*(this.maxWaitTime-this.minWaitTime)+this.minWaitTime,this.finalShowEntity&&(this.finalShowEntity.enabled=!0),this.finalHideEntity&&(this.finalHideEntity.enabled=!1),this.hide&&(this.entity.enabled=!1)}};var MinigameUtils={setCustomAvatar:function(e,t,n){n=n||".character-avatar";try{var o=e.assets.find(t,"texture");o?(o.ready((function(){var e=document.querySelector(n);if(e){var t=o.getFileUrl();e.innerHTML='<img src="'+t+'" alt="Avatar">'}})),o.loaded||e.assets.load(o)):console.warn('Avatar texture "'+t+'" not found. Using default SVG avatar.')}catch(e){console.error("Error setting custom avatar:",e)}},setMultipleAvatars:function(e,t){var n=this;Object.keys(t).forEach((function(o){var a=t[o];a&&""!==a.trim()&&n.setCustomAvatar(e,a,o)}))},setElementIcons:function(e,t,n){n=n||"data-doc";try{Object.keys(t).forEach((function(o){var a=t[o];if(a&&""!==a.trim()){var r=e.assets.find(a);r?(r.ready((function(){var e=r.getFileUrl(),t=document.querySelector(".draggable-item["+n+'="'+o+'"]');if(t){var a=t.querySelector(".doc-icon");a&&(a.innerHTML='<img src="'+e+'" alt="Element icon">')}})),r.loaded||e.assets.load(r)):console.warn('Element icon "'+a+'" not found for '+o+". Using default SVG.")}}))}catch(e){console.error("Error setting element icons:",e)}},setupDragEvents:function(e,t){t=t||{},e.setAttribute("draggable","true"),e.addEventListener("dragstart",(function(e){e.currentTarget.classList.add("dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.currentTarget.innerHTML),t.onDragStart&&t.onDragStart(e.currentTarget,e)})),t.onDrag&&e.addEventListener("drag",(function(e){e.clientX>0&&e.clientY>0&&t.onDrag(e.currentTarget,e)})),e.addEventListener("dragend",(function(e){e.currentTarget.classList.remove("dragging"),t.onDragEnd&&(global_game_sound.play("swap"),t.onDragEnd(e.currentTarget,e))})),e.addEventListener("mousedown",(function(e){e.stopPropagation()}))},setupTouchEvents:function(e,t){t=t||{};var n=null,o=null,a=null,r=0,l=0,s={passive:!1};e.addEventListener("touchstart",(function(e){e.cancelable&&e.preventDefault(),e.stopPropagation(),n=e.currentTarget;var s=e.touches[0];o=n.parentNode,a=n.nextSibling;var i=n.getBoundingClientRect();r=s.clientX-i.left,l=s.clientY-i.top,n.style.width=i.width+"px",n.style.height=i.height+"px",document.body.appendChild(n),n.classList.add("dragging"),n.style.position="fixed",n.style.zIndex="9999",n.style.margin="0",n.style.transform="none",n.style.top="0",n.style.left="0",n.style.left=s.clientX-r+"px",n.style.top=s.clientY-l+"px",t.onTouchStart&&t.onTouchStart(n,s)}),s),e.addEventListener("touchmove",(function(e){if(n){e.cancelable&&e.preventDefault();var o=e.touches[0];n.style.left=o.clientX-r+"px",n.style.top=o.clientY-l+"px",t.onTouchMove&&t.onTouchMove(n,o);var a=n.style.display;n.style.display="none";var s=document.elementFromPoint(o.clientX,o.clientY);n.style.display=a,document.querySelectorAll(".drop-zone").forEach((function(e){e.classList.remove("drag-over")}));var i=s?s.closest(".drop-zone"):null;i&&!i.classList.contains("filled")&&i.classList.add("drag-over")}}),s),e.addEventListener("touchend",(function(e){if(n){e.cancelable&&e.preventDefault();var r=e.changedTouches[0],l=n.style.display;n.style.display="none";var s=document.elementFromPoint(r.clientX,r.clientY);n.style.display=l;var i=s?s.closest(".drop-zone"):null;n.style.position="",n.style.zIndex="",n.style.left="",n.style.top="",n.style.width="",n.style.height="",n.style.margin="",n.style.transform="",n.classList.remove("dragging"),o&&(a?o.insertBefore(n,a):o.appendChild(n)),document.querySelectorAll(".drop-zone").forEach((function(e){e.classList.remove("drag-over")})),t.onTouchEnd&&t.onTouchEnd(n,i,r),n=null,o=null,a=null}}),s)},setupDropZones:function(e){document.querySelectorAll(".drop-zone").forEach((function(t){t.addEventListener("dragover",(function(e){e.preventDefault(),e.dataTransfer.dropEffect="move",t.classList.contains("filled")||t.classList.add("drag-over")})),t.addEventListener("dragleave",(function(e){t.classList.remove("drag-over")})),t.addEventListener("drop",(function(n){n.preventDefault(),t.classList.remove("drag-over"),global_game_sound.play("drop"),e(t)}))}))},handleSuccess:function(){var e=document.querySelector(".modal"),t=document.getElementById("overlay");e&&e.classList.add("hidden"),t&&t.classList.add("hidden");var n=document.getElementById("successOverlay");n?(console.log("Success overlay found, displaying..."),n.style.display="flex",global_game_sound.play("win_minigame"),global_game_sound.pause("minigame"),"function"==typeof launchEnhancedConfetti&&launchEnhancedConfetti()):console.error("Success overlay NOT found!")},setupContinueButton:function(e){var t=document.getElementById("continueBtn");t&&t.addEventListener("click",(function(){var t=document.getElementById("successOverlay");t&&(global_game_sound.play("button"),global_game_sound.play("main"),t.style.display="none");var n=document.querySelector(".modal"),o=document.getElementById("overlay");n&&n.classList.add("hidden"),o&&o.classList.add("hidden"),"undefined"!=typeof global_overlay_gui&&(global_overlay_gui=!1),"undefined"!=typeof global_movement&&(global_movement=!0),"undefined"!=typeof global_mini_game_completed&&(global_mini_game_completed=!0);var a=e.entity;a&&a.script&&a.script.miniGameModal&&a.script.miniGameModal.cleanupMinigame()}))},hideTitle:function(e,t){if(t=t||".docs-title",1===e){var n=document.querySelector(t);n&&(n.style.opacity="0",n.style.transform="scale(0.8)",setTimeout((function(){n.style.display="none"}),300))}},showSubmitButton:function(e,t,n){n=n||"submitBtn",e===t&&setTimeout((function(){var e=document.getElementById(n);e&&(e.style.display="block")}),500)}};function launchEnhancedConfetti(){if("function"!=typeof confetti)return void console.warn("Confetti library not loaded");const e=Date.now()+4e3,t={startVelocity:45,spread:360,ticks:100,zIndex:1e4,gravity:.8,decay:.94,scalar:1.2};confetti(Object.assign({},t,{particleCount:100,spread:180,origin:{x:.5,y:.5},colors:["#F4D35E","#5B8FEB","#FF6B9D","#5FC88F","#FFA500","#FF69B4"]}));const n=setInterval((function(){const o=e-Date.now();if(o<=0)return clearInterval(n);const a=o/4e3*60;var r,l;confetti(Object.assign({},t,{particleCount:a,angle:60,spread:80,origin:{x:0,y:.6},colors:["#F4D35E","#FFA500","#FF69B4"]})),confetti(Object.assign({},t,{particleCount:a,angle:120,spread:80,origin:{x:1,y:.6},colors:["#5B8FEB","#5FC88F","#FF6B9D"]})),confetti(Object.assign({},t,{particleCount:a/2,spread:100,origin:{x:(r=.3,l=.7,Math.random()*(l-r)+r),y:0},colors:["#FFD700","#FF1493","#00CED1"]}))}),200);setTimeout((function(){confetti(Object.assign({},t,{particleCount:50,spread:360,startVelocity:60,origin:{x:.5,y:.5},shapes:["star"],colors:["#FFD700","#F4D35E"],scalar:1.5}))}),500)}var Minigame1=pc.createScript("minigame1");Minigame1.prototype.initialize=function(){var t=0,i=new Set,n=null;function handleDrop(e){if(!e.classList.contains("filled")&&n){e.classList.add("filled"),i.add(e.dataset.zone),e.innerHTML="";var a=n.cloneNode(!0);a.classList.remove("draggable-item"),a.classList.add("dropped-item"),a.removeAttribute("draggable"),e.appendChild(a),n.style.display="none",t++,MinigameUtils.hideTitle(t),MinigameUtils.showSubmitButton(t,3),n=null}}MinigameUtils.setCustomAvatar(this.app,global_photo_boss),MinigameUtils.setElementIcons(this.app,{documento1:"cv.svg",documento2:"borrador.svg",documento3:"curricular.svg"},"data-doc"),document.querySelectorAll(".draggable-item").forEach((function(t){MinigameUtils.setupDragEvents(t,{onDragStart:function(t){n=t},onDragEnd:function(){n=null}}),MinigameUtils.setupTouchEvents(t,{onTouchStart:function(t){n=t},onTouchEnd:function(t,i){i&&i.classList.contains("drop-zone")&&!i.classList.contains("filled")&&handleDrop(i),n=null}})})),MinigameUtils.setupDropZones(handleDrop),document.getElementById("submitBtn").addEventListener("click",(function(){global_game_sound.play("play"),MinigameUtils.handleSuccess()})),MinigameUtils.setupContinueButton(this)},Minigame1.prototype.update=function(t){};var Minigame2=pc.createScript("minigame2");Minigame2.prototype.initialize=function(){var e,t,r=[{id:1,text:"Reuniones iniciales"},{id:2,text:"Ideas nuevas y aportes"},{id:3,text:"Creación del cronograma"},{id:4,text:"Reelaboración del contenido"},{id:5,text:"Revisión final"}],a=JSON.parse(JSON.stringify(r)).sort((function(){return Math.random()-.5})),n=JSON.parse(JSON.stringify(a)),s=null,i=document.getElementById("sortableList"),getDragAfterElement=function(e,t){return Array.from(e.querySelectorAll(".sortable-item:not(.dragging)")).reduce((function(e,r){var a=r.getBoundingClientRect(),n=t-a.top-a.height/2;return n<0&&n>e.offset?{offset:n,element:r}:e}),{offset:Number.NEGATIVE_INFINITY}).element},updateStepsOrder=function(){var e=i.querySelectorAll(".sortable-item");a=[],e.forEach((function(e,t){var n=parseInt(e.dataset.stepId),s=r.find((function(e){return e.id===n}));a.push(s),e.dataset.index=t}))},checkIfOrderChanged=function(){var e=document.getElementById("submitBtn"),t=!1;i.querySelectorAll(".sortable-item").forEach((function(e,r){parseInt(e.dataset.stepId)!==n[r].id&&(t=!0)})),t&&(e.style.display="block")},setupDragEvents=function(e){e.addEventListener("dragstart",(function(e){s=e.currentTarget,parseInt(e.currentTarget.dataset.index),e.currentTarget.classList.add("dragging"),e.dataTransfer.effectAllowed="move",i.classList.add("drag-active")})),e.addEventListener("dragend",(function(e){var t=e.currentTarget||s;t&&(t.classList.remove("dragging"),i&&i.classList.remove("drag-active"),t.classList.add("just-dropped"),global_game_sound.play("swap"),setTimeout((function(){t&&t.classList&&t.classList.remove("just-dropped")}),400))})),e.addEventListener("dragover",(function(e){e.preventDefault(),e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.add("drag-over");var t=getDragAfterElement(i,e.clientY),r=document.querySelector(".dragging");r&&i&&(null==t?i.appendChild(r):i.insertBefore(r,t))})),e.addEventListener("dragleave",(function(e){e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.remove("drag-over")})),e.addEventListener("drop",(function(e){e.preventDefault(),e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.remove("drag-over"),i.querySelectorAll(".drag-over").forEach((function(e){e.classList.remove("drag-over")})),updateStepsOrder(),checkIfOrderChanged()})),e.addEventListener("touchstart",(function(e){e.preventDefault(),s=e.currentTarget,parseInt(e.currentTarget.dataset.index),s.classList.add("dragging"),i.classList.add("drag-active")})),e.addEventListener("touchmove",(function(e){if(e.preventDefault(),s){var t=e.touches[0],r=getDragAfterElement(i,t.clientY);null==r?i.appendChild(s):i.insertBefore(s,r)}})),e.addEventListener("touchend",(function(e){if(e.preventDefault(),s&&s.classList){s.classList.remove("dragging"),i&&i.classList&&i.classList.remove("drag-active");var t=s;s.classList.add("just-dropped"),global_game_sound.play("swap"),setTimeout((function(){t&&t.classList&&t.classList.remove("just-dropped")}),400),updateStepsOrder(),checkIfOrderChanged(),s=null}}))};document.getElementById("submitBtn").addEventListener("click",(function(){var e=i.querySelectorAll(".sortable-item"),t=!0;e.forEach((function(e,a){parseInt(e.dataset.stepId)!==r[a].id&&(t=!1)})),t?(global_game_sound.play("play"),MinigameUtils.handleSuccess()):(global_game_sound.play("retry"),e.forEach((function(e,t){parseInt(e.dataset.stepId)!==r[t].id&&(e.classList.add("wrong-order"),setTimeout((function(){e.classList.remove("wrong-order")}),1e3))})))})),MinigameUtils.setupContinueButton(this),MinigameUtils.setMultipleAvatars(this.app,{".character-avatar":global_photo_producer,".left-avatar .avatar-container":"player"+global_player_gender+"_head.png",".right-avatar .avatar-container":global_photo_producer}),i?(console.log("SortableList element found, rendering list..."),e=a,(t=i)?(console.log("Rendering "+e.length+" steps"),t.innerHTML="",e.forEach((function(e,r){var a=document.createElement("div");a.className="sortable-item",a.setAttribute("draggable","true"),a.dataset.stepId=e.id,a.dataset.index=r,a.innerHTML='<div class="step-number">'+e.id+'</div><div class="step-content"><div class="drag-handle"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="5" r="1" /><circle cx="9" cy="12" r="1" /><circle cx="9" cy="19" r="1" /><circle cx="15" cy="5" r="1" /><circle cx="15" cy="12" r="1" /><circle cx="15" cy="19" r="1" /></svg></div><span class="step-text">'+e.text+"</span></div>",t.appendChild(a),setupDragEvents(a)}))):console.error("Container not found for sortableList")):console.error("SortableList element not found!")},Minigame2.prototype.update=function(e){};var Minigame4=pc.createScript("minigame4");Minigame4.prototype.initialize=function(){var e=0,t=new Set,n=null,a=document.getElementById("colorPalette"),l=document.getElementById("designBrush"),i=document.getElementById("paintEffects");MinigameUtils.setCustomAvatar(this.app,global_photo_designer),MinigameUtils.setElementIcons(this.app,{imagen:"image_icon.svg",texto:"text_icon.svg",video:"video_icon.svg"},"data-element");var o={imagen:"#FF6B9D",texto:"#5FC88F",video:"#9333EA"};function showColorPalette(){a&&a.classList.add("active")}function hideColorPalette(){a&&a.classList.remove("active")}function updateBrushPosition(e,t){l&&(l.style.left=e+15+"px",l.style.top=t-15+"px",l.classList.add("active"))}function hideBrush(){l&&l.classList.remove("active")}var s=null,r=null,d=null,c=0,u=0,p={passive:!1};function handleDrop(a){if(!a.classList.contains("filled")&&n){var l=n.dataset.element;if(l===a.dataset.element){a.classList.add("filled"),t.add(a.dataset.zone),global_game_sound.play("drop");var s=a.getBoundingClientRect(),r=s.left+s.width/2,d=s.top+s.height/2;a.innerHTML="";var c=n.cloneNode(!0);c.classList.remove("draggable-item"),c.classList.add("dropped-item"),c.removeAttribute("draggable"),a.appendChild(c),n.style.display="none",function createPaintEffects(e,t,n){if(i){var a=o[e]||"#5B8FEB",l=document.createElement("div");l.className="paint-splash",l.style.left=t+"px",l.style.top=n+"px",l.style.background=a,i.appendChild(l),setTimeout((function(){i&&l.parentNode===i&&i.removeChild(l)}),1500);for(var s=0;s<8;s++)setTimeout((function(){var e=document.createElement("div");e.className="paint-drop",e.style.left=t+100*(Math.random()-.5)+"px",e.style.top=n-30+"px",e.style.background=a,i.appendChild(e),setTimeout((function(){i&&e.parentNode===i&&i.removeChild(e)}),1200)}),80*s);var r=document.createElement("div");r.className="color-wave",r.style.left=t+"px",r.style.top=n+"px",r.style.borderColor=a,i.appendChild(r),setTimeout((function(){i&&r.parentNode===i&&i.removeChild(r)}),1500)}}(l,r,d),function createColorParticles(e){if(i)for(var t=o[e]||"#5B8FEB",n=0;n<20;n++)setTimeout((function(){var e=document.createElement("div");e.className="color-particle",e.style.left=100*Math.random()+"%",e.style.top=60*Math.random()+40+"%",e.style.background=t,e.style.color=t,e.style.setProperty("--drift-x",100*(Math.random()-.5)+"px"),i.appendChild(e),setTimeout((function(){i&&e.parentNode===i&&i.removeChild(e)}),2e3)}),30*n)}(l),e++,MinigameUtils.hideTitle(e),MinigameUtils.showSubmitButton(e,3),n=null}else global_game_sound.play("retry")}}document.querySelectorAll(".draggable-item").forEach((function(e){e.setAttribute("draggable","true"),e.addEventListener("dragstart",(function(e){(n=e.currentTarget).classList.add("dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",n.innerHTML),showColorPalette()})),e.addEventListener("drag",(function(e){e.clientX>0&&e.clientY>0&&updateBrushPosition(e.clientX,e.clientY)})),e.addEventListener("dragend",(function(e){e.currentTarget.classList.remove("dragging"),hideColorPalette(),hideBrush(),global_game_sound.play("swap")})),e.addEventListener("mousedown",(function(e){e.stopPropagation()})),e.addEventListener("touchstart",(function(e){e.cancelable&&e.preventDefault(),e.stopPropagation(),s=e.currentTarget,n=e.currentTarget;var t=e.touches[0];r=s.parentNode,d=s.nextSibling;var a=s.getBoundingClientRect();c=t.clientX-a.left,u=t.clientY-a.top,s.style.width=a.width+"px",s.style.height=a.height+"px",document.body.appendChild(s),s.classList.add("dragging"),s.style.position="fixed",s.style.zIndex="9999",s.style.margin="0",s.style.transform="none",s.style.top="0",s.style.left="0",s.style.left=t.clientX-c+"px",s.style.top=t.clientY-u+"px",showColorPalette(),updateBrushPosition(t.clientX,t.clientY)}),p),e.addEventListener("touchmove",(function(e){if(s){e.cancelable&&e.preventDefault();var t=e.touches[0];s.style.left=t.clientX-c+"px",s.style.top=t.clientY-u+"px",updateBrushPosition(t.clientX,t.clientY);var n=s.style.display;s.style.display="none";var a=document.elementFromPoint(t.clientX,t.clientY);s.style.display=n,document.querySelectorAll(".drop-zone").forEach((function(e){e.classList.remove("drag-over")}));var l=a?a.closest(".drop-zone"):null;l&&l.classList.contains("drop-zone")&&!l.classList.contains("filled")&&l.classList.add("drag-over")}}),p),e.addEventListener("touchend",(function(e){if(s){e.cancelable&&e.preventDefault();var t=e.changedTouches[0],a=s.style.display;s.style.display="none";var l=document.elementFromPoint(t.clientX,t.clientY);s.style.display=a;var i=l?l.closest(".drop-zone"):null;s.style.position="",s.style.zIndex="",s.style.left="",s.style.top="",s.style.width="",s.style.height="",s.style.margin="",s.style.transform="",s.classList.remove("dragging"),r&&(d?r.insertBefore(s,d):r.appendChild(s)),document.querySelectorAll(".drop-zone").forEach((function(e){e.classList.remove("drag-over")})),i&&i.classList.contains("drop-zone")&&!i.classList.contains("filled")?handleDrop(i):global_game_sound.play("retry"),hideColorPalette(),hideBrush(),s=null,r=null,d=null,i||(n=null)}}),p)})),document.querySelectorAll(".drop-zone").forEach((function(e){e.addEventListener("dragover",(function(t){t.preventDefault(),t.dataTransfer.dropEffect="move",e.classList.contains("filled")||e.classList.add("drag-over")})),e.addEventListener("dragleave",(function(t){e.classList.remove("drag-over")})),e.addEventListener("drop",(function(t){t.preventDefault(),e.classList.remove("drag-over"),handleDrop(e)}))})),document.getElementById("submitBtn").addEventListener("click",(function(){MinigameUtils.handleSuccess()})),MinigameUtils.setupContinueButton(this)},Minigame4.prototype.update=function(e){};var Minigame5=pc.createScript("minigame5");Minigame5.prototype.initialize=function(){var e=0,t=new Set,n=null,a=document.getElementById("processingGear"),o=document.getElementById("codeConsole"),s=document.getElementById("codeRain");function showProcessingGear(){a&&a.classList.add("active")}function hideProcessingGear(){a&&a.classList.remove("active")}MinigameUtils.setCustomAvatar(this.app,global_photo_developer);var l=null,i=null,r=null,d=0,c=0,u={passive:!1};function handleDrop(a){if(!a.classList.contains("filled")&&n){var l=n.dataset.element,i=n.dataset.component,r=a.dataset.element,d=a.dataset.component;if(l===r&&i===d){a.classList.add("filled"),t.add(a.dataset.zone),global_game_sound.play("drop"),a.innerHTML="";var c=n.cloneNode(!0);if(c.classList.remove("draggable-item"),c.classList.add("dropped-item"),c.removeAttribute("draggable"),a.appendChild(c),n.style.display="none",function showCodeConsole(e){if(o){var t=o.querySelector(".console-body");if(t){var n=[{type:"command",text:"create "+e},{type:"success",text:"✓ "+e+" loaded successfully"},{type:"command",text:"Building..."},{type:"success",text:"✓ Build completed"}];t.innerHTML="",n.forEach((function(e,n){setTimeout((function(){var n=document.createElement("div");n.className="console-line"+("success"===e.type?" success":""),"command"===e.type?n.innerHTML='<span class="prompt">$</span> <span class="command">'+e.text+"</span>":n.textContent=e.text,t.appendChild(n)}),200*n)}))}o.classList.add("show"),setTimeout((function(){o.classList.remove("show")}),2500)}}(n.querySelector(".code-name").textContent),function createCodeRain(e){if(s)for(var t={database:["SELECT *","INSERT INTO","UPDATE","DELETE FROM","WHERE","JOIN","CREATE TABLE","PRIMARY KEY","FOREIGN KEY","GROUP BY","ORDER BY","COUNT()","SUM()","AVG()"],html:["<header>","<nav>","<section>","<div>","<h1>","</header>","<article>","<footer>"],css:["{color: #fff}","display: flex","margin: 0","padding: 20px","border-radius: 10px","background: linear-gradient()"],js:["function()","const","let","=>","return","console.log()","addEventListener()","document.querySelector()"]},n=t[e]||t.js,a=0;a<15;a++)setTimeout((function(){var e=document.createElement("div");e.className="code-particle",e.textContent=n[Math.floor(Math.random()*n.length)],e.style.left=100*Math.random()+"%",e.style.top=60*Math.random()+40+"%",e.style.setProperty("--float-x",100*(Math.random()-.5)+"px"),s.appendChild(e),setTimeout((function(){s&&e.parentNode===s&&s.removeChild(e)}),2e3)}),50*a)}(l),setTimeout((function(){!function activateConnectors(){var e=document.querySelector(".database-zone.filled"),t=document.querySelector(".content-zone.filled"),n=document.querySelector(".styles-zone.filled"),a=document.querySelector(".interaction-zone.filled");if(e&&t){var o=document.querySelector(".db-to-content");o&&o.classList.add("active")}if(t&&n){var s=document.querySelector(".content-to-styles");s&&s.classList.add("active")}if(t&&a){var l=document.querySelector(".content-to-code");l&&l.classList.add("active")}}()}),300),e++,MinigameUtils.hideTitle(e),4===e){var u=document.getElementById("visualizeBtn");u&&(u.style.display="block")}n=null}else global_game_sound.play("retry")}}document.querySelectorAll(".draggable-item").forEach((function(e){e.setAttribute("draggable","true"),e.addEventListener("dragstart",(function(e){(n=e.currentTarget).classList.add("dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",n.innerHTML),showProcessingGear()})),e.addEventListener("dragend",(function(e){e.currentTarget.classList.remove("dragging"),hideProcessingGear(),global_game_sound.play("swap")})),e.addEventListener("mousedown",(function(e){e.stopPropagation()})),e.addEventListener("touchstart",(function(e){e.cancelable&&e.preventDefault(),e.stopPropagation(),l=e.currentTarget,n=e.currentTarget;var t=e.touches[0];i=l.parentNode,r=l.nextSibling;var a=l.getBoundingClientRect();d=t.clientX-a.left,c=t.clientY-a.top,l.style.width=a.width+"px",l.style.height=a.height+"px",document.body.appendChild(l),l.classList.add("dragging"),l.style.position="fixed",l.style.zIndex="9999",l.style.margin="0",l.style.transform="none",l.style.top="0",l.style.left="0",l.style.left=t.clientX-d+"px",l.style.top=t.clientY-c+"px",showProcessingGear()}),u),e.addEventListener("touchmove",(function(e){if(l){e.cancelable&&e.preventDefault();var t=e.touches[0];l.style.left=t.clientX-d+"px",l.style.top=t.clientY-c+"px";var n=l.style.display;l.style.display="none";var a=document.elementFromPoint(t.clientX,t.clientY);l.style.display=n,document.querySelectorAll(".drop-zone").forEach((function(e){e.classList.remove("drag-over")}));var o=a?a.closest(".drop-zone"):null;o&&o.classList.contains("drop-zone")&&!o.classList.contains("filled")&&o.classList.add("drag-over")}}),u),e.addEventListener("touchend",(function(e){if(l){e.cancelable&&e.preventDefault();var t=e.changedTouches[0],a=l.style.display;l.style.display="none";var o=document.elementFromPoint(t.clientX,t.clientY);l.style.display=a;var s=o?o.closest(".drop-zone"):null;l.style.position="",l.style.zIndex="",l.style.left="",l.style.top="",l.style.width="",l.style.height="",l.style.margin="",l.style.transform="",l.classList.remove("dragging"),i&&(r?i.insertBefore(l,r):i.appendChild(l)),document.querySelectorAll(".drop-zone").forEach((function(e){e.classList.remove("drag-over")})),s&&s.classList.contains("drop-zone")&&!s.classList.contains("filled")?handleDrop(s):global_game_sound.play("retry"),hideProcessingGear(),l=null,i=null,r=null,s||(n=null)}}),u)})),document.querySelectorAll(".drop-zone").forEach((function(e){e.addEventListener("dragover",(function(t){t.preventDefault(),t.dataTransfer.dropEffect="move",e.classList.contains("filled")||e.classList.add("drag-over")})),e.addEventListener("dragleave",(function(t){e.classList.remove("drag-over")})),e.addEventListener("drop",(function(t){t.preventDefault(),e.classList.remove("drag-over"),handleDrop(e)}))})),document.getElementById("visualizeBtn").addEventListener("click",(function(){this.style.display="none",global_game_sound.play("button");var e=document.getElementById("dropzoneContainer");e&&(e.style.opacity="0",e.style.transform="scale(0.95)",e.style.transition="all 0.5s ease",setTimeout((function(){e.style.display="none";var t=document.getElementById("finalWebsite");t&&(t.style.display="flex"),setTimeout((function(){var e=document.getElementById("submitBtn");e&&(e.style.display="block")}),1e3)}),500))})),document.getElementById("submitBtn").addEventListener("click",(function(){MinigameUtils.handleSuccess()})),MinigameUtils.setupContinueButton(this)},Minigame5.prototype.update=function(e){};var Minigame3=pc.createScript("minigame3");Minigame3.prototype.initialize=function(){this.holdDuration=2e3,this.holdTimers=new Map,this.pressStartTimes=new Map,this.animationFrames=new Map,this.completedCount=0,this.gameComplete=!1,this.scriptElements=[{id:"texto",name:"TEXTOS",svg:'<svg width="20" height="20" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>book_2_fill</title> <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Education" transform="translate(-144.000000, -48.000000)"> <g id="book_2_fill" transform="translate(144.000000, 48.000000)"> <path d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z" id="MingCute" fill-rule="nonzero"> </path> <path d="M4,5 C4,3.34315 5.34315,2 7,2 L18,2 C19.1046,2 20,2.89543 20,4 L20,16.99 C20,17.1576 19.9623,17.3115 19.8872,17.4617 L19.3416,18.5528 C19.2009,18.8343 19.2009,19.1657 19.3416,19.4472 L19.8854,20.5348 C19.9586,20.6737 20,20.832 20,21 C20,21.5523 19.5523,22 19,22 L7,22 C5.34315,22 4,20.6569 4,19 L4,5 Z M7,18 L17.4076,18 C17.1789,18.6468 17.1789,19.3532 17.4076,20 L7,20 C6.44772,20 6,19.5523 6,19 C6,18.4477 6.44772,18 7,18 Z M10,7 C9.44772,7 9,7.44772 9,8 C9,8.55228 9.44772,9 10,9 L14,9 C14.5523,9 15,8.55228 15,8 C15,7.44772 14.5523,7 14,7 L10,7 Z" id="形状" fill="#ffffff"> </path> </g> </g> </g> </g></svg>',unlocked:!1,connected:!1},{id:"videos",name:"AUDIOS <br>Y VIDEOS",svg:'<svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>video_fill</title> <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Media" transform="translate(-1296.000000, -48.000000)"> <g id="video_fill" transform="translate(1296.000000, 48.000000)"> <path d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z" id="MingCute" fill-rule="nonzero"> </path> <path d="M4,3 C2.89543,3 2,3.89543 2,5 L2,19 C2,20.1046 2.89543,21 4,21 L20,21 C21.1046,21 22,20.1046 22,19 L22,5 C22,3.89543 21.1046,3 20,3 L4,3 Z M8.62499,8.6296 C8.72188,7.80744 9.57864,7.31143 10.3401,7.63811 C10.8441,7.85432 11.9082,8.33973 13.2562,9.11795 C14.6049,9.89665 15.5577,10.5759 15.9966,10.904 C16.6579,11.3985 16.6608,12.3872 15.9967,12.8836 C15.5601,13.21 14.6147,13.883 13.2551,14.6679 C11.8961,15.4525 10.8409,15.9347 10.3398,16.1497 C9.57694,16.4771 8.72176,15.9789 8.62504,15.1584 C8.56076,14.6132 8.44938,13.4451 8.44938,11.8938 C8.44938,10.3428 8.5607,9.17504 8.62499,8.6296 Z" id="形状" fill="#ffffff"> </path> </g> </g> </g> </g></svg>',unlocked:!1,connected:!1},{id:"graficos",name:"GRÁFICOS",svg:'<svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>pic_fill</title> <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="File" transform="translate(-912.000000, -48.000000)" fill-rule="nonzero"> <g id="pic_fill" transform="translate(912.000000, 48.000000)"> <path d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z" id="MingCute" fill-rule="nonzero"> </path> <path d="M20,3 C21.1046,3 22,3.89543 22,5 L22,19 C22,20.1046 21.1046,21 20,21 L4,21 C2.89543,21 2,20.1046 2,19 L2,5 C2,3.89543 2.89543,3 4,3 L20,3 Z M20,5 L4,5 L4,15.1005 L8.9948,10.1057 C9.48296,9.61757 10.2744,9.61757 10.7626,10.1057 L14.8284,14.1716 L16.0659,12.9342 C16.554,12.446 17.3455,12.446 17.8336,12.9342 L20,15.1005 L20,5 Z M15.5,7 C16.3284,7 17,7.67157 17,8.5 C17,9.32843 16.3284,10 15.5,10 C14.6716,10 14,9.32843 14,8.5 C14,7.67157 14.6716,7 15.5,7 Z" id="形状" fill="#ffffff"> </path> </g> </g> </g> </g></svg>',unlocked:!1,connected:!1},{id:"animaciones",name:"ANIMACIONES",svg:'<svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>run_fill</title> <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Transport" transform="translate(-816.000000, -48.000000)" fill-rule="nonzero"> <g id="run_fill" transform="translate(816.000000, 48.000000)"> <path d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z" id="MingCute" fill-rule="nonzero"> </path> <path d="M13,2 C14.6569,2 16,3.34315 16,5 C16,6.4374272 14.989097,7.63873126 13.6394248,7.93171632 L13.469,7.96356 L14.9049,10.261 L16.6286,9.57154 C17.1414,9.36643 17.7234,9.61584 17.9285,10.1286 C18.11895,10.6047714 17.9175097,11.1406102 17.4771844,11.3789437 L17.3714,11.4285 L15.6477,12.118 C14.8018647,12.4563529 13.842291,12.1788886 13.3046353,11.4607687 L13.2089,11.321 L13.0463,11.0609 L12.4403,13.4851 C12.38606,13.7019 12.298348,13.901548 12.184076,14.0798456 L12.0935,14.2095 L13.7468,15.4377 C14.1430667,15.7320111 14.4146519,16.1610383 14.5132351,16.6403612 L14.542,16.8223 L14.895,20 L15,20 C15.5523,20 16,20.4477 16,21 C16,21.51285 15.613973,21.9355092 15.1166239,21.9932725 L15,22 L14.0895,22 C13.5690357,22 13.1258286,21.63665 13.0156081,21.1386974 L12.9962,21.0215 L12.5542,17.0431 L9.40368,14.7028 C9.34671,14.6605 9.29553,14.6132 9.2503,14.5621 C8.69851333,14.1201667 8.40463653,13.4019169 8.52705735,12.6715064 L8.55972,12.5149 L9.35399,9.33785 L7.78454,9.80869 L6.94868,12.3162 C6.77404,12.8402 6.20772,13.1234 5.68377,12.9487 C5.19725429,12.7865714 4.9183499,12.2866153 5.0208232,11.7965565 L5.05132,11.6838 L5.88717,9.17623 C6.07583833,8.61021583 6.50617896,8.16080701 7.05678434,7.94578318 L7.20984,7.89304 L10.6474,6.86176 C10.2421,6.35022 10,5.70338 10,5 C10,3.34315 11.3431,2 13,2 Z M9.6,15.2 C10.0418,15.5314 10.1314,16.1582 9.8,16.6 L8.5838,18.2216 C8.10614,18.8585 7.21414,19.0113 6.55175,18.5697 L4.62197,17.2832 C4.22939,17.5957 3.65616,17.5704 3.29289,17.2071 C2.90237,16.8166 2.90237,16.1834 3.29289,15.7929 L3.7871,15.2987 C4.12753,14.9583 4.66094,14.9055 5.06152,15.1725 L7.26759,16.6432 L8.2,15.4 C8.53137,14.9582 9.15817,14.8686 9.6,15.2 Z" id="形状" fill="#ffffff"> </path> </g> </g> </g> </g></svg>',unlocked:!1,connected:!1},{id:"ejercicios",name:"EJERCICIOS",svg:'<svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>file_check_fill</title> <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="File" transform="translate(-576.000000, -240.000000)"> <g id="file_check_fill" transform="translate(576.000000, 240.000000)"> <path d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z" id="MingCute" fill-rule="nonzero"> </path> <path d="M12,2 L12,8.5 C12,9.32843 12.6716,10 13.5,10 L20,10 L20,20 C20,21.1046 19.1046,22 18,22 L6,22 C4.89543,22 4,21.1046 4,20 L4,4 C4,2.89543 4.89543,2 6,2 L12,2 Z M13.591,13.6571 L11.1161,16.1319 L10.409,15.4248 C10.0185,15.0343 9.38535,15.0343 8.99482,15.4248 C8.6043,15.8153 8.6043,16.4485 8.99482,16.839 L10.3383,18.1825 C10.7679,18.6121 11.4644,18.6121 11.894,18.1825 L15.0052,15.0713 C15.3958,14.6807 15.3958,14.0476 15.0052,13.6571 C14.6147,13.2665 13.9815,13.2665 13.591,13.6571 Z M14,2.04336 C14.3759,2.12295 14.7241,2.30991 15,2.58579 L19.4142,7 C19.6901,7.27588 19.8771,7.62406 19.9566,8 L14,8 L14,2.04336 Z" id="形状结合" fill="#ffffff"> </path> </g> </g> </g> </g></svg>',unlocked:!1,connected:!1},{id:"interaccion",name:"INTERACCIÓN",svg:'<svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="currentColor"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>live_location_fill</title> <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Map" transform="translate(-864.000000, -48.000000)" fill-rule="nonzero"> <g id="live_location_fill" transform="translate(864.000000, 48.000000)"> <path d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z" id="MingCute" fill-rule="nonzero"> </path> <path d="M4,16 C4.51283143,16 4.93550653,16.386027 4.9932722,16.8833761 L5,17 L5,19 L7,19 C7.55228,19 8,19.4477 8,20 C8,20.51285 7.61395571,20.9355092 7.11662025,20.9932725 L7,21 L5,21 C3.94563773,21 3.08183483,20.18415 3.00548573,19.1492661 L3,19 L3,17 C3,16.4477 3.44772,16 4,16 Z M20,16 C20.5523,16 21,16.4477 21,17 L21,19 C21,20.1046 20.1046,21 19,21 L17,21 C16.4477,21 16,20.5523 16,20 C16,19.4477 16.4477,19 17,19 L19,19 L19,17 C19,16.4477 19.4477,16 20,16 Z M15.6416,7.04509 C16.0175,6.88402 16.4535,6.96799 16.7426,7.25713 C16.9996667,7.51414333 17.094521,7.8872258 16.9993506,8.23093148 L16.9547,8.35816 L12.712,18.2577 C12.5416,18.6553 12.1348,18.8982 11.704,18.8598 C11.3122727,18.8248 10.9813719,18.5644281 10.8513426,18.2006978 L10.8185,18.0886 L9.89837,14.1014 L5.91117,13.1813 C5.48965,13.084 5.17847,12.7267 5.13999,12.2958 C5.10501727,11.9040727 5.30263959,11.5322628 5.63759774,11.3398744 L5.74211,11.2877 L15.6416,7.04509 Z M7,3 C7.55228,3 8,3.44772 8,4 C8,4.55228 7.55228,5 7,5 L5,5 L5,7 C5,7.55228 4.55228,8 4,8 C3.44772,8 3,7.55228 3,7 L3,5 C3,3.89543 3.89543,3 5,3 L7,3 Z M19,3 C20.1046,3 21,3.89543 21,5 L21,7 C21,7.55228 20.5523,8 20,8 C19.4477,8 19,7.55228 19,7 L19,5 L17,5 C16.4477,5 16,4.55228 16,4 C16,3.44772 16.4477,3 17,3 L19,3 Z" id="形状" fill="#ffffff"> </path> </g> </g> </g> </g></svg>',unlocked:!1,connected:!1}],this.totalElements=this.scriptElements.length;document.querySelector(".floating-bubbles"),document.querySelector(".script-collection"),document.querySelector(".script-document"),document.querySelector(".progress-fill"),document.querySelector(".progress-text"),document.querySelector(".submit-btn");this.createBubbles(),this.setupHoldPressEvents(),this.updateProgress(),MinigameUtils.setCustomAvatar(this.app,global_photo_producer),MinigameUtils.setCustomAvatar(this.app,global_photo_producer,".avatar-icon"),"undefined"!=typeof MinigameUtils&&MinigameUtils.setupContinueButton(this)},Minigame3.prototype.createBubbles=function(){var e=document.querySelector(".floating-bubbles");if(e){e.innerHTML="";for(var t=0;t<this.scriptElements.length;t++){var i=this.scriptElements[t],o=document.createElement("div");o.className="bubble-container",o.setAttribute("data-element",i.id),o.setAttribute("data-index",t),o.innerHTML='<div class="bubble"><div class="bubble-icon">'+i.svg+'</div><div class="bubble-label">'+i.name+'</div></div><div class="progress-circle"><svg class="progress-ring" width="100%" height="100%" viewBox="0 0 120 120"><circle class="progress-ring-bg" cx="60" cy="60" r="54" stroke="rgba(255, 255, 255, 0.3)" stroke-width="6" fill="transparent"/><circle class="progress-ring-fill" cx="60" cy="60" r="54" stroke="rgba(255, 255, 255, 0.9)" stroke-width="6" fill="transparent"/></svg></div>',e.appendChild(o)}}},Minigame3.prototype.setupHoldPressEvents=function(){var e=this;document.querySelectorAll(".bubble-container").forEach((function(t){t.addEventListener("mousedown",(function(i){e.startHold(i,t)})),t.addEventListener("mouseup",(function(i){e.endHold(i,t)})),t.addEventListener("mouseleave",(function(i){e.endHold(i,t)})),t.addEventListener("touchstart",(function(i){i.preventDefault(),e.startHold(i,t)})),t.addEventListener("touchend",(function(i){i.preventDefault(),e.endHold(i,t)}))}));var t=document.querySelector(".submit-btn");t&&t.addEventListener("click",(function(){global_game_sound.play("play"),e.submitScript()}))},Minigame3.prototype.startHold=function(e,t){var i=t.getAttribute("data-element"),o=this.findElementById(i);if(o&&!o.unlocked){t.classList.add("pressing"),global_game_sound.play("load_bubble"),this.startProgressAnimation(t),this.pressStartTimes.set(i,Date.now());var n=this,r=setTimeout((function(){n.completeUnlock(t,o)}),this.holdDuration);this.holdTimers.set(i,r),navigator.vibrate&&navigator.vibrate(50)}},Minigame3.prototype.endHold=function(e,t){var i=t.getAttribute("data-element"),o=this.findElementById(i);if(o&&!o.unlocked){var n=this.holdTimers.get(i);n&&(clearTimeout(n),this.holdTimers.delete(i)),this.stopProgressAnimation(i),t.classList.remove("pressing"),global_game_sound.stop("load_bubble"),this.pressStartTimes.delete(i)}},Minigame3.prototype.startProgressAnimation=function(e){var t=this,i=e.getAttribute("data-element"),o=e.querySelector(".progress-ring-fill"),n=2*Math.PI*54;if(o){o.style.strokeDasharray=n,o.style.strokeDashoffset=n;var r=Date.now();this.animationFrames.set(i,requestAnimationFrame((function animate(){var e=Date.now()-r,l=Math.min(e/t.holdDuration,1),s=n*(1-l);o.style.strokeDashoffset=s,l<1&&t.pressStartTimes.has(i)&&t.animationFrames.set(i,requestAnimationFrame(animate))})))}},Minigame3.prototype.stopProgressAnimation=function(e){var t=this.animationFrames.get(e);t&&(cancelAnimationFrame(t),this.animationFrames.delete(e));var i=document.querySelector('[data-element="'+e+'"]');if(i){var o=i.querySelector(".progress-ring-fill");o&&(o.style.strokeDashoffset=2*Math.PI*54)}},Minigame3.prototype.completeUnlock=function(e,t){t.unlocked=!0,e.classList.remove("pressing"),e.classList.add("unlocked"),navigator.vibrate&&navigator.vibrate([100,50,100]);var i=e.querySelector(".progress-ring-fill");i&&(i.style.strokeDashoffset="0"),this.showProcessingModal(t.name);var o=this;setTimeout((function(){o.hideProcessingModal(),o.connectToDocument(e,t),global_game_sound.stop("progress"),global_game_sound.play("complete_bubble")}),2e3);var n=t.id;this.holdTimers.delete(n),this.pressStartTimes.delete(n),this.animationFrames.delete(n),this.completedCount++,this.updateProgress(),setTimeout((function(){o.checkGameComplete()}),2100)},Minigame3.prototype.showProcessingModal=function(e){var t=document.getElementById("processingModal"),i=document.querySelector(".processing-text");global_game_sound.play("progress"),t&&t.classList.add("active"),i&&(i.textContent="PLANIFICACIÓN DE "+e.replace("<br>"," "))},Minigame3.prototype.hideProcessingModal=function(){var e=document.getElementById("processingModal");e&&e.classList.remove("active")},Minigame3.prototype.connectToDocument=function(e,t){t.connected=!0,e.classList.add("connected");var i=document.querySelector(".script-collection"),o=document.querySelector(".script-document");if(i&&o){var n=e.getBoundingClientRect(),r=i.getBoundingClientRect(),l=o.getBoundingClientRect(),s=n.left+n.width/2-r.left,L=n.top+n.height/2-r.top,a=l.left+l.width/2-r.left-s,d=l.top+l.height/2-r.top-L;e.style.setProperty("--merge-x",a+"px"),e.style.setProperty("--merge-y",d+"px"),o.classList.add("receiving"),setTimeout((function(){o.classList.remove("receiving")}),800)}var c=document.querySelector(".script-document");if(c&&!c.classList.contains("complete")){for(var g=1;g<=6;g++)c.classList.remove("unlock-"+g);var u="unlock-"+this.completedCount;c.classList.add(u)}},Minigame3.prototype.findElementById=function(e){for(var t=0;t<this.scriptElements.length;t++)if(this.scriptElements[t].id===e)return this.scriptElements[t];return null},Minigame3.prototype.updateProgress=function(){var e=this.scriptElements.length,t=Math.round(this.completedCount/e*100),i=document.getElementById("circularProgressFill"),o=document.getElementById("progressTextCircular");if(i){var n=2*Math.PI*100*(1-t/100);i.style.strokeDashoffset=n}o&&(o.textContent=100===t?"Completado":t+"% completado")},Minigame3.prototype.checkGameComplete=function(){if(this.completedCount===this.scriptElements.length&&!this.gameComplete){this.gameComplete=!0;var e=document.querySelector(".script-document");if(e){for(var t=1;t<=6;t++)e.classList.remove("unlock-"+t);e.classList.add("complete")}var i=document.querySelector(".script-collection");i&&i.classList.add("complete");var o=document.querySelector(".submit-btn");o&&(o.style.display="block")}},Minigame3.prototype.submitScript=function(){if(this.gameComplete)if("undefined"!=typeof MinigameUtils&&MinigameUtils.handleSuccess)MinigameUtils.handleSuccess();else{var e=document.getElementById("successOverlay");if(e){e.style.display="flex";var t=document.getElementById("continueBtn");if(t){t.onclick=function(){e.style.display="none";var t=document.querySelector(".modal"),i=document.querySelector(".overlay");t&&t.classList.add("hidden"),i&&i.classList.add("hidden"),"undefined"!=typeof global_movement&&(global_movement=!0),"undefined"!=typeof global_overlay_gui&&(global_overlay_gui=!1),"undefined"!=typeof global_mini_game_completed&&(global_mini_game_completed=!0)}}}console.log("Game completed!")}},Minigame3.prototype.update=function(e){};var Pulse=pc.createScript("pulse");Pulse.attributes.add("duration",{type:"number",default:1,title:"Duration (seconds)",description:"Duration of one pulse cycle"}),Pulse.attributes.add("scaleMultiplier",{type:"number",default:1.2,min:.1,title:"Scale Multiplier",description:"Max scale relative to initial scale (e.g., 1.2 = 120% of original)"}),Pulse.attributes.add("autoStart",{type:"boolean",default:!0,title:"Auto Start",description:"Start pulsing automatically"}),Pulse.attributes.add("loop",{type:"boolean",default:!0,title:"Loop",description:"Continuously repeat the pulse effect"}),Pulse.prototype.initialize=function(){this.initialScale=this.entity.getLocalScale().clone(),this.time=0,this.isActive=this.autoStart},Pulse.prototype.update=function(t){if(this.isActive){this.time+=t;var i=this.time%this.duration/this.duration,e=1+Math.sin(i*Math.PI)*(this.scaleMultiplier-1);this.entity.setLocalScale(this.initialScale.x*e,this.initialScale.y*e,this.initialScale.z*e),!this.loop&&this.time>=this.duration&&this.stop()}},Pulse.prototype.start=function(){this.isActive=!0,this.time=0},Pulse.prototype.stop=function(){this.isActive=!1,this.entity.setLocalScale(this.initialScale)},Pulse.prototype.pause=function(){this.isActive=!1},Pulse.prototype.resume=function(){this.isActive=!0},Pulse.prototype.reset=function(){this.time=0,this.entity.setLocalScale(this.initialScale)};var Endgame=pc.createScript("endgame");Endgame.prototype.initialize=function(){MinigameUtils.handleSuccess(),MinigameUtils.setupContinueButton(this);document.getElementById("continueBtn");document.getElementById("continueBtn").addEventListener("click",(function(){global_mini_game_completed=!0}))},Endgame.prototype.update=function(e){};var CornerRadius=pc.createScript("corneRadius");CornerRadius.attributes.add("cornerRadius",{type:"number",default:20,title:"Corner Radius (pixels)",description:"Radio de las esquinas en píxeles"}),CornerRadius.attributes.add("smoothness",{type:"number",default:1,min:.1,max:3,title:"Edge Smoothness",description:"Suavidad del borde (anti-aliasing)"}),CornerRadius.prototype.initialize=function(){this.entity.element&&"image"===this.entity.element.type?(this.updateMaterial(),this.on("attr:cornerRadius",this.updateMaterial,this),this.on("attr:smoothness",this.updateMaterial,this)):console.error("CornerRadius: Este script solo funciona con elementos UI de tipo Image")},CornerRadius.prototype.updateMaterial=function(){const e=this.entity.element,t=e.calculatedWidth,i=e.calculatedHeight,a=e.texture,r=e.color,o=e.opacity,s=document.createElement("canvas");s.width=Math.max(t,1),s.height=Math.max(i,1);const n=s.getContext("2d"),c=Math.min(this.cornerRadius,Math.min(t,i)/2);if(n.clearRect(0,0,t,i),n.beginPath(),n.moveTo(c,0),n.lineTo(t-c,0),n.arcTo(t,0,t,c,c),n.lineTo(t,i-c),n.arcTo(t,i,t-c,i,c),n.lineTo(c,i),n.arcTo(0,i,0,i-c,c),n.lineTo(0,c),n.arcTo(0,0,c,0,c),n.closePath(),a){n.save(),n.clip();const e=a.getSource();e&&n.drawImage(e,0,0,t,i),n.restore()}else{const e=r||new pc.Color(1,1,1,1);n.fillStyle=`rgba(${255*e.r}, ${255*e.g}, ${255*e.b}, ${o||1})`,n.fill()}const d=new pc.Texture(this.app.graphicsDevice,{width:s.width,height:s.height,format:pc.PIXELFORMAT_RGBA8,addressU:pc.ADDRESS_CLAMP_TO_EDGE,addressV:pc.ADDRESS_CLAMP_TO_EDGE,minFilter:pc.FILTER_LINEAR,magFilter:pc.FILTER_LINEAR});d.setSource(s),e.texture=d,this.roundedTexture=d};function FxaaEffect(e){pc.PostEffect.call(this,e);var a=["uniform sampler2D uColorBuffer;","uniform vec2 uResolution;","","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","","void main()","{","    vec3 rgbNW = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * uResolution ).xyz;","    vec3 rgbNE = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * uResolution ).xyz;","    vec3 rgbSW = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * uResolution ).xyz;","    vec3 rgbSE = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * uResolution ).xyz;","    vec4 rgbaM  = texture2D( uColorBuffer,  gl_FragCoord.xy  * uResolution );","    vec3 rgbM  = rgbaM.xyz;","    float opacity  = rgbaM.w;","","    vec3 luma = vec3( 0.299, 0.587, 0.114 );","","    float lumaNW = dot( rgbNW, luma );","    float lumaNE = dot( rgbNE, luma );","    float lumaSW = dot( rgbSW, luma );","    float lumaSE = dot( rgbSE, luma );","    float lumaM  = dot( rgbM,  luma );","    float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","    float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","","    vec2 dir;","    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","","    float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","","    float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","    dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX), max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX), dir * rcpDirMin)) * uResolution;","","    vec3 rgbA = 0.5 * (","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * ( 1.0 / 3.0 - 0.5 ) ).xyz +","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * ( 2.0 / 3.0 - 0.5 ) ).xyz );","","    vec3 rgbB = rgbA * 0.5 + 0.25 * (","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * -0.5 ).xyz +","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * 0.5 ).xyz );","","    float lumaB = dot( rgbB, luma );","","    if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )","    {","        gl_FragColor = vec4( rgbA, opacity );","    }","    else","    {","        gl_FragColor = vec4( rgbB, opacity );","    }","}"].join("\n");this.fxaaShader=pc.ShaderUtils.createShader(e,{uniqueName:"FxaaShader",attributes:{aPosition:pc.SEMANTIC_POSITION},vertexGLSL:pc.PostEffect.quadVertexShader,fragmentGLSL:a}),this.resolution=new Float32Array(2)}FxaaEffect.prototype=Object.create(pc.PostEffect.prototype),FxaaEffect.prototype.constructor=FxaaEffect,Object.assign(FxaaEffect.prototype,{render:function(e,a,t){var r=this.device.scope;this.resolution[0]=1/e.width,this.resolution[1]=1/e.height,r.resolve("uResolution").setValue(this.resolution),r.resolve("uColorBuffer").setValue(e.colorBuffer),this.drawQuad(a,this.fxaaShader,t)}});var Fxaa=pc.createScript("fxaa");Fxaa.prototype.initialize=function(){this.effect=new FxaaEffect(this.app.graphicsDevice);var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("state",(function(a){a?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};